<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.3.4">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2026-01-22T19:26:43+01:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Oumi’s Blog</title><subtitle>Thoughtful reflections on software development, written by a developer for developers.
</subtitle><author><name>Oumaima Zerouali</name><email>oumaima.zerouali@gmail.com</email></author><entry xml:lang="nl"><title type="html">Migratie naar Java 25 en Spring Boot 4: eerlijk, het was chaos</title><link href="http://localhost:4000/nl/2026/01/22/migration-to-java-25/" rel="alternate" type="text/html" title="Migratie naar Java 25 en Spring Boot 4: eerlijk, het was chaos" /><published>2026-01-22T12:00:00+01:00</published><updated>2026-01-22T12:00:00+01:00</updated><id>http://localhost:4000/nl/2026/01/22/migration-to-java-25</id><content type="html" xml:base="http://localhost:4000/nl/2026/01/22/migration-to-java-25/"><![CDATA[<blockquote>
  <p>“I’m ready… to break everything and figure it out later!” – SpongeBob SquarePants</p>
</blockquote>

<p>Iedereen zegt altijd dat upgraden van Spring makkelijk is, toch? Gewoon <strong>OpenRewrite</strong> draaien, een paar kleine dingen fixen en klaar.</p>

<p>Nou… laat me vertellen over onze migratie van <strong>Java 17/21 naar Java 25</strong> en <strong>Spring Boot 3 naar 4.0.1</strong>.</p>

<p>Voor één service kost het nu maximaal één uur om alles te fixen. Niet zo erg. Maar ik heb deze migratie al een paar keer gedaan bij de klant. En ik blijf steeds dezelfde problemen tegenkomen, keer op keer.</p>

<p>Dus ik dacht: laat ik dit opschrijven. Misschien helpt het iemand anders die deze migratie moet doen.</p>

<h2 id="waarom-we-dit-überhaupt-deden">Waarom we dit überhaupt deden</h2>

<p>Onze tech lead wilde naar <strong>Java 25</strong>. Zijn reden? Hij wil altijd de nieuwste versie van alles. En eerlijk, ik was wel enthousiast om eens een migratie mee te maken.</p>

<p>Daarnaast moesten we:</p>

<ul>
  <li>Upgraden naar <strong>Spring Boot 4</strong> en <strong>Spring Framework 7</strong></li>
  <li>De <strong>Jakarta-migratie</strong> volledig afronden</li>
  <li>Oude code opruimen voordat we nieuwe features toevoegen</li>
</ul>

<p>Onze applicaties bevatten allemaal:</p>

<ul>
  <li>REST APIs</li>
  <li>Custom HTTP clients</li>
  <li>JWT security</li>
  <li>File uploads</li>
  <li>Heel veel tests met MockMvc</li>
  <li>Jackson voor JSON overal</li>
</ul>

<h2 id="openrewrite-helpt-maar-is-geen-magie">OpenRewrite: helpt, maar is geen magie</h2>

<p>We begonnen met <strong>OpenRewrite</strong> en de officiële Spring recipes (<a href="https://docs.openrewrite.org/recipes/java">bron</a>).</p>

<p>Wat Rewrite goed deed:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">javax.*</code> → <code class="language-plaintext highlighter-rouge">jakarta.*</code></li>
  <li>Spring imports updaten</li>
  <li>Deprecated APIs fixen</li>
  <li>Config classes aanpassen</li>
  <li><strong>Try-catch syntax vereenvoudigen</strong></li>
  <li><code class="language-plaintext highlighter-rouge">.additionalMessageConverters(new MappingJackson2HttpMessageConverter())</code> → <code class="language-plaintext highlighter-rouge">.additionalMessageConverters(new JacksonJsonHttpMessageConverter())</code></li>
  <li><code class="language-plaintext highlighter-rouge">.format(...)</code> → <code class="language-plaintext highlighter-rouge">.formatted(...)</code></li>
  <li><strong>YAML splitsen per profiel</strong></li>
</ul>

<p><em>Maar… er kwamen ook snel problemen.</em></p>

<h2 id="openrewrite--jdkjre-mismatch">OpenRewrite + JDK/JRE mismatch</h2>

<p>Eerste keer dat ik OpenRewrite draaide op Java 25 crashte het met:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">LinkageError</span><span class="o">:</span> <span class="n">loader</span> <span class="n">constraint</span> <span class="nl">violation:</span> <span class="n">com</span><span class="o">.</span><span class="na">sun</span><span class="o">.</span><span class="na">tools</span><span class="o">.</span><span class="na">javac</span><span class="o">.</span><span class="na">parser</span><span class="o">.</span><span class="na">Tokens</span><span class="n">$Comment$CommentStyle</span>
</code></pre></div></div>

<p>Oorzaak: <strong>JDK en JRE waren niet dezelfde versie</strong>.</p>

<p><strong>Fix:</strong></p>

<ul>
  <li>Check altijd dat JDK en JRE dezelfde versie hebben</li>
  <li>Voor ons: beide op <strong>Java 25</strong> zetten</li>
</ul>

<h2 id="alles-compileert--dan-exploderen-de-tests">“Alles compileert!” … dan exploderen de tests</h2>

<p>Na Rewrite en alle compileerfouten fixen, startten we de tests. En dan? Alles faalde.</p>

<p>Problemen zaten vooral in:</p>

<ul>
  <li>MockMvc tests</li>
  <li>JSON serialization</li>
  <li>HTTP clients</li>
  <li>Jackson config</li>
</ul>

<h2 id="jackson-de-pijn-die-nooit-stopt">Jackson: de pijn die nooit stopt</h2>

<p>Spring Boot 4 verhuist Jackson van:</p>

<p>Oude locatie:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">com</span><span class="o">.</span><span class="na">fasterxml</span><span class="o">.</span><span class="na">jackson</span><span class="o">.*</span>
</code></pre></div></div>

<p>Nieuwe locatie:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">tools</span><span class="o">.</span><span class="na">jackson</span><span class="o">.*</span>
</code></pre></div></div>

<p>Problemen die we tegenkwamen:</p>

<ul>
  <li>Mixed imports in tests</li>
  <li>Constants zoals <code class="language-plaintext highlighter-rouge">WRITE_DATES_AS_TIMESTAMPS</code> verdwenen</li>
  <li>ObjectMapper conflicts, vooral in tests met meerdere primary beans</li>
</ul>

<p>Vroeger hadden we:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Bean</span>
<span class="nd">@Primary</span>
<span class="nc">ObjectMapper</span> <span class="nf">objectMapper</span><span class="o">(</span><span class="nc">Jackson2ObjectMapperBuilder</span> <span class="n">builder</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">builder</span><span class="o">.</span><span class="na">dateFormat</span><span class="o">(...).</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p>In Boot 4:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Jackson2ObjectMapperBuilder</code> is <strong>deprecated</strong></li>
  <li>Boot maakt zijn eigen <strong>primary</strong> <code class="language-plaintext highlighter-rouge">jacksonJsonMapper</code></li>
</ul>

<p>Resultaat:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NoUniqueBeanDefinitionException:
more than one 'primary' bean found: [objectMapper, jacksonJsonMapper]
</code></pre></div></div>

<p><strong>Nieuwe aanpak:</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="nc">ObjectMapper</span> <span class="nf">objectMapper</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">var</span> <span class="n">dateFormat</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleDateFormat</span><span class="o">(</span><span class="s">"dd-MM-yyyy"</span><span class="o">);</span>

    <span class="k">return</span> <span class="nc">JsonMapper</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
            <span class="o">.</span><span class="na">defaultDateFormat</span><span class="o">(</span><span class="n">dateFormat</span><span class="o">)</span>
            <span class="o">.</span><span class="na">findAndAddModules</span><span class="o">()</span>
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>Bron:</strong> <a href="https://spring.io/blog/2025/10/07/introducing-jackson-3-support-in-spring">Introducing Jackson 3 support in Spring</a></p>

<h2 id="resttemplate--http-veranderingen">RestTemplate &amp; HTTP veranderingen</h2>

<h3 id="resttemplatebuilder-verplaatst">RestTemplateBuilder verplaatst</h3>

<p>Oude locatie:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">web</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">RestTemplateBuilder</span>
</code></pre></div></div>

<p>Nieuwe locatie:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">.</span><span class="na">restclient</span><span class="o">.</span><span class="na">RestTemplateBuilder</span>
</code></pre></div></div>

<blockquote>
  <p>In productiecode migreer je vaak naar <strong>RestClient</strong>, Spring Boot 4 geeft hier voorkeur aan.</p>
</blockquote>

<h3 id="response-api-veranderd">Response API veranderd</h3>

<p>Oude manier:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">response</span><span class="o">.</span><span class="na">getStatusCodeValue</span><span class="o">()</span>
</code></pre></div></div>

<p>Nieuwe manier:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">response</span><span class="o">.</span><span class="na">getStatusCode</span><span class="o">().</span><span class="na">value</span><span class="o">()</span>
</code></pre></div></div>

<h3 id="headers-vervangen">Headers vervangen</h3>

<p>Oude Apache manier:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Header</span><span class="o">[]</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getAllHeaders</span><span class="o">();</span>
</code></pre></div></div>

<p>Nieuwe Spring manier:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">HttpHeaders</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getHeaders</span><span class="o">();</span>
</code></pre></div></div>

<h3 id="timeouts-zijn-nu-builders">Timeouts zijn nu builders</h3>

<p>Oude setters bestaan niet meer. Nieuw:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">HttpComponentsClientHttpRequestFactory</span> <span class="n">requestFactory</span> <span class="o">=</span>
    <span class="nc">ClientHttpRequestFactoryBuilder</span><span class="o">.</span><span class="na">httpComponents</span><span class="o">()</span>
        <span class="o">.</span><span class="na">withDefaultRequestConfigCustomizer</span><span class="o">(</span><span class="n">rc</span> <span class="o">-&gt;</span> <span class="n">rc</span>
            <span class="o">.</span><span class="na">setConnectTimeout</span><span class="o">(</span><span class="nc">Timeout</span><span class="o">.</span><span class="na">ofSeconds</span><span class="o">(</span><span class="mi">5</span><span class="o">))</span>
            <span class="o">.</span><span class="na">setConnectionRequestTimeout</span><span class="o">(</span><span class="nc">Timeout</span><span class="o">.</span><span class="na">ofSeconds</span><span class="o">(</span><span class="mi">5</span><span class="o">))</span>
            <span class="o">.</span><span class="na">setResponseTimeout</span><span class="o">(</span><span class="nc">Timeout</span><span class="o">.</span><span class="na">ofSeconds</span><span class="o">(</span><span class="mi">5</span><span class="o">))</span>
        <span class="o">)</span>
        <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</code></pre></div></div>

<p><strong>Custom HttpClients</strong> moeten nu via <code class="language-plaintext highlighter-rouge">.withHttpClientCustomizer(...)</code> worden toegevoegd.
<strong>Bron:</strong> <a href="https://docs.spring.io/spring-framework/reference/integration/rest-clients.html#rest-request-factories">Spring Framework 7 HTTP Client</a></p>

<h2 id="apache-httpclient-4--5">Apache HttpClient 4 → 5</h2>

<p>Alles is veranderd:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">org.apache.http.*</code> → <code class="language-plaintext highlighter-rouge">org.apache.hc.*</code></li>
  <li>Timeouts, SSL, connection managers, request builders → volledige rewrite</li>
</ul>

<p><strong>Bron:</strong> <a href="https://hc.apache.org/httpcomponents-client-5.6.x/migration-guide/preparation.html">Apache HttpClient 5 Migration</a></p>

<h2 id="swagger--openapi-na-jakarta">Swagger &amp; OpenAPI na Jakarta</h2>

<p>Na migratie verdwijnen OpenAPI annotaties. Voeg toe:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>io.swagger.core.v3<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>swagger-annotations-jakarta<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>
<p><strong>Bron:</strong> <a href="https://github.com/swagger-api/swagger-core">Swagger</a></p>

<h2 id="spring-security-7-websocket">Spring Security 7 WebSocket</h2>

<p><code class="language-plaintext highlighter-rouge">AbstractSecurityWebSocketMessageBrokerConfigurer</code> is verwijderd. Voor ons werkt deze aanpak:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.messaging.Message</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.authorization.AuthorizationDecision</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.authorization.AuthorizationManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.config.annotation.web.messaging.EnableWebSocketSecurity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.messaging.access.intercept.MessageAuthorizationContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.messaging.access.intercept.MessageMatcherDelegatingAuthorizationManager</span><span class="o">;</span>

<span class="nd">@Configuration</span>
<span class="nd">@EnableWebSocketSecurity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebSocketSecurityConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">AuthorizationManager</span><span class="o">&lt;</span><span class="nc">Message</span><span class="o">&lt;?&gt;&gt;</span> <span class="n">messageAuthorizationManager</span><span class="o">(</span>
            <span class="nc">MessageMatcherDelegatingAuthorizationManager</span><span class="o">.</span><span class="na">Builder</span> <span class="n">messages</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">messages</span>
                <span class="o">.</span><span class="na">nullDestMatcher</span><span class="o">().</span><span class="na">permitAll</span><span class="o">()</span>
                <span class="o">.</span><span class="na">simpSubscribeDestMatchers</span><span class="o">(</span><span class="s">"/**"</span><span class="o">).</span><span class="na">permitAll</span><span class="o">()</span>
                <span class="o">.</span><span class="na">simpDestMatchers</span><span class="o">(</span><span class="s">"/**"</span><span class="o">).</span><span class="na">permitAll</span><span class="o">()</span>
                <span class="o">.</span><span class="na">anyMessage</span><span class="o">().</span><span class="na">permitAll</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">messages</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">AuthorizationManager</span><span class="o">&lt;</span><span class="nc">MessageAuthorizationContext</span><span class="o">&lt;?&gt;&gt;</span> <span class="n">authorizationManager</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">AuthorizationDecision</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>Bron:</strong> <a href="https://newreleases.io/project/github/spring-projects/spring-security/release/7.0.0-M1">Spring Security 7 WebSocket</a>,
<a href="https://github.com/spring-projects/spring-security/pull/17328">Github Thread</a></p>

<h2 id="terugkerende-problemen">Terugkerende problemen</h2>

<p>Tijdens de migratie kwamen de meeste problemen steeds terug, vooral in tests:</p>

<ul>
  <li>Jackson namespace breekt constant</li>
  <li>ObjectMapper conflicts in tests</li>
  <li>HTTP client configuratie moet volledig herschreven worden</li>
  <li>Response handling methoden gewijzigd</li>
  <li>RestTemplate en builders hebben nieuwe imports of zijn vervangen door RestClient</li>
  <li>Tests falen vaak ondanks succesvolle compilatie</li>
</ul>

<p>Daarnaast blijkt dat compiler, serialisatielaag, SSL-configuratie en auto-configuration allemaal tegelijk worden beïnvloed door de upgrade.</p>

<h2 id="wat-ik-zou-aanraden">Wat ik zou aanraden</h2>

<ul>
  <li>Plan extra tijd voor tests</li>
  <li>Verwacht Jackson-problemen en ObjectMapper-conflicten</li>
  <li>Bereid je voor op herschrijven van HTTP client code</li>
  <li>Run je volledige test suite vroeg en vaak</li>
  <li>Gebruik OpenRewrite</li>
</ul>

<p>Persoonlijk ben ik blij dat ik deze migratie zelf mocht doen. Ondanks de frustraties en het vele lezen van documentatie, gaf het me een veel dieper inzicht in hoe Spring Boot en Spring Framework werken en hoe ze de controle over infrastructuur en configuratie hebben.</p>

<p>Wil je meer weten over Spring Boot 4 en Spring Framework 7? Check dan volgende post: <a href="https://www.baeldung.com/spring-boot-4-spring-framework-7">Spring Boot 4 &amp; Spring Framework 7</a>.</p>

<h2 id="overzicht-van-alle-bronnen">Overzicht van alle bronnen</h2>

<table>
  <thead>
    <tr>
      <th>Resource</th>
      <th>Link</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>OpenRewrite recipes</td>
      <td><a href="https://docs.openrewrite.org/recipes/java">https://docs.openrewrite.org/recipes/java</a></td>
    </tr>
    <tr>
      <td>Spring Framework 7 HTTP Client</td>
      <td><a href="https://docs.spring.io/spring-framework/reference/integration/rest-clients.html#rest-request-factories">https://docs.spring.io/spring-framework/reference/integration/rest-clients.html#rest-request-factories</a></td>
    </tr>
    <tr>
      <td>Apache HttpClient 5 Migration</td>
      <td><a href="https://hc.apache.org/httpcomponents-client-5.6.x/migration-guide/preparation.html">https://hc.apache.org/httpcomponents-client-5.6.x/migration-guide/preparation.html</a></td>
    </tr>
    <tr>
      <td>Swagger (swagger-core)</td>
      <td><a href="https://github.com/swagger-api/swagger-core">https://github.com/swagger-api/swagger-core</a></td>
    </tr>
    <tr>
      <td>Spring Security 7 WebSocket (PR)</td>
      <td><a href="https://github.com/spring-projects/spring-security/pull/17328">https://github.com/spring-projects/spring-security/pull/17328</a></td>
    </tr>
    <tr>
      <td>Spring Security 7 (discussion thread)</td>
      <td><a href="https://github.com/spring-projects/spring-security/pull/17328">https://github.com/spring-projects/spring-security/pull/17328</a></td>
    </tr>
    <tr>
      <td>Spring Boot 4 &amp; Spring Framework 7 (overview)</td>
      <td><a href="https://www.baeldung.com/spring-boot-4-spring-framework-7">https://www.baeldung.com/spring-boot-4-spring-framework-7</a></td>
    </tr>
  </tbody>
</table>]]></content><author><name>Oumaima Zerouali</name><email>oumaima.zerouali@gmail.com</email></author><category term="java" /><category term="spring" /><category term="migration" /><category term="openrewrite" /><category term="softwaredevelopment" /><summary type="html"><![CDATA[“I’m ready… to break everything and figure it out later!” – SpongeBob SquarePants]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://localhost:4000/assets/img/migration-to-java-25.jpg" /><media:content medium="image" url="http://localhost:4000/assets/img/migration-to-java-25.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry xml:lang="en"><title type="html">Migration to Java 25 and Spring Boot 4: honestly, it was chaos</title><link href="http://localhost:4000/2026/01/22/migration-to-java-25/" rel="alternate" type="text/html" title="Migration to Java 25 and Spring Boot 4: honestly, it was chaos" /><published>2026-01-22T12:00:00+01:00</published><updated>2026-01-22T12:00:00+01:00</updated><id>http://localhost:4000/2026/01/22/migration-to-java-25</id><content type="html" xml:base="http://localhost:4000/2026/01/22/migration-to-java-25/"><![CDATA[<blockquote>
  <p>“I’m ready… to break everything and figure it out later!” – SpongeBob SquarePants</p>
</blockquote>

<p>Everyone always says that upgrading Spring is easy, right? Just run <strong>OpenRewrite</strong>, fix a few small things, and you’re done.</p>

<p>Well… let me tell you about our migration from <strong>Java 17/21 to Java 25</strong> and from <strong>Spring Boot 3 to 4.0.1</strong>.</p>

<p>For a single service it now takes at most an hour to fix everything. Not too bad. But I’ve already done this migration a few times for clients. And I keep running into the same problems, over and over again.</p>

<p>So I thought: let me write this down. Maybe it helps someone else who has to go through this migration.</p>

<h2 id="why-we-did-this-in-the-first-place">Why we did this in the first place</h2>

<p>Our tech lead wanted to move to <strong>Java 25</strong>. His reason? He always wants the newest version of everything. And honestly, I was pretty excited to experience a migration like this.</p>

<p>On top of that, we had to:</p>

<ul>
  <li>Upgrade to <strong>Spring Boot 4</strong> and <strong>Spring Framework 7</strong></li>
  <li>Fully finish the <strong>Jakarta migration</strong></li>
  <li>Clean up old code before adding new features</li>
</ul>

<p>All of our applications contain:</p>

<ul>
  <li>REST APIs</li>
  <li>Custom HTTP clients</li>
  <li>JWT security</li>
  <li>File uploads</li>
  <li>A lot of tests with MockMvc</li>
  <li>Jackson for JSON everywhere</li>
</ul>

<h2 id="openrewrite-helpful-but-not-magic">OpenRewrite: helpful, but not magic</h2>

<p>We started with <strong>OpenRewrite</strong> and the official Spring recipes (<a href="https://docs.openrewrite.org/recipes/java">source</a>).</p>

<p>What Rewrite did well:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">javax.*</code> → <code class="language-plaintext highlighter-rouge">jakarta.*</code></li>
  <li>Updating Spring imports</li>
  <li>Fixing deprecated APIs</li>
  <li>Adjusting config classes</li>
  <li><strong>Simplifying try-catch syntax</strong></li>
  <li><code class="language-plaintext highlighter-rouge">.additionalMessageConverters(new MappingJackson2HttpMessageConverter())</code> → <code class="language-plaintext highlighter-rouge">.additionalMessageConverters(new JacksonJsonHttpMessageConverter())</code></li>
  <li><code class="language-plaintext highlighter-rouge">.format(...)</code> → <code class="language-plaintext highlighter-rouge">.formatted(...)</code></li>
  <li><strong>Splitting YAML per profile</strong></li>
</ul>

<p><em>But… problems showed up pretty quickly.</em></p>

<h2 id="openrewrite--jdkjre-mismatch">OpenRewrite + JDK/JRE mismatch</h2>

<p>The first time I ran OpenRewrite on Java 25 it crashed with:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">LinkageError</span><span class="o">:</span> <span class="n">loader</span> <span class="n">constraint</span> <span class="nl">violation:</span> <span class="n">com</span><span class="o">.</span><span class="na">sun</span><span class="o">.</span><span class="na">tools</span><span class="o">.</span><span class="na">javac</span><span class="o">.</span><span class="na">parser</span><span class="o">.</span><span class="na">Tokens</span><span class="n">$Comment$CommentStyle</span>
</code></pre></div></div>

<p>Cause: <strong>JDK and JRE were not the same version</strong>.</p>

<p><strong>Fix:</strong></p>

<ul>
  <li>Always check that JDK and JRE are the same version</li>
  <li>For us: set both to <strong>Java 25</strong></li>
</ul>

<h2 id="everything-compiles--then-the-tests-explode">“Everything compiles!” … then the tests explode</h2>

<p>After Rewrite and fixing all compilation errors, we started the tests. And then? Everything failed.</p>

<p>Most problems were in:</p>

<ul>
  <li>MockMvc tests</li>
  <li>JSON serialization</li>
  <li>HTTP clients</li>
  <li>Jackson config</li>
</ul>

<h2 id="jackson-the-pain-that-never-ends">Jackson: the pain that never ends</h2>

<p>Spring Boot 4 moves Jackson from:</p>

<p>Old location:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">com</span><span class="o">.</span><span class="na">fasterxml</span><span class="o">.</span><span class="na">jackson</span><span class="o">.*</span>
</code></pre></div></div>

<p>New location:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">tools</span><span class="o">.</span><span class="na">jackson</span><span class="o">.*</span>
</code></pre></div></div>

<p>Problems we ran into:</p>

<ul>
  <li>Mixed imports in tests</li>
  <li>Constants like <code class="language-plaintext highlighter-rouge">WRITE_DATES_AS_TIMESTAMPS</code> disappeared</li>
  <li>ObjectMapper conflicts, especially in tests with multiple primary beans</li>
</ul>

<p>Before we had:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Bean</span>
<span class="nd">@Primary</span>
<span class="nc">ObjectMapper</span> <span class="nf">objectMapper</span><span class="o">(</span><span class="nc">Jackson2ObjectMapperBuilder</span> <span class="n">builder</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">builder</span><span class="o">.</span><span class="na">dateFormat</span><span class="o">(...).</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p>In Boot 4:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">Jackson2ObjectMapperBuilder</code> is <strong>deprecated</strong></li>
  <li>Boot creates its own <strong>primary</strong> <code class="language-plaintext highlighter-rouge">jacksonJsonMapper</code></li>
</ul>

<p>Result:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>NoUniqueBeanDefinitionException:
more than one 'primary' bean found: [objectMapper, jacksonJsonMapper]
</code></pre></div></div>

<p><strong>New approach:</strong></p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Bean</span>
<span class="kd">public</span> <span class="nc">ObjectMapper</span> <span class="nf">objectMapper</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">var</span> <span class="n">dateFormat</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleDateFormat</span><span class="o">(</span><span class="s">"dd-MM-yyyy"</span><span class="o">);</span>

    <span class="k">return</span> <span class="nc">JsonMapper</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
            <span class="o">.</span><span class="na">defaultDateFormat</span><span class="o">(</span><span class="n">dateFormat</span><span class="o">)</span>
            <span class="o">.</span><span class="na">findAndAddModules</span><span class="o">()</span>
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>Source:</strong> <a href="https://spring.io/blog/2025/10/07/introducing-jackson-3-support-in-spring">Introducing Jackson 3 support in Spring</a></p>

<h2 id="resttemplate--http-changes">RestTemplate &amp; HTTP changes</h2>

<h3 id="resttemplatebuilder-moved">RestTemplateBuilder moved</h3>

<p>Old location:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">web</span><span class="o">.</span><span class="na">client</span><span class="o">.</span><span class="na">RestTemplateBuilder</span>
</code></pre></div></div>

<p>New location:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">org</span><span class="o">.</span><span class="na">springframework</span><span class="o">.</span><span class="na">boot</span><span class="o">.</span><span class="na">restclient</span><span class="o">.</span><span class="na">RestTemplateBuilder</span>
</code></pre></div></div>

<blockquote>
  <p>In production code you’ll often migrate to <strong>RestClient</strong>, which Spring Boot 4 prefers.</p>
</blockquote>

<h3 id="response-api-changed">Response API changed</h3>

<p>Old way:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">response</span><span class="o">.</span><span class="na">getStatusCodeValue</span><span class="o">()</span>
</code></pre></div></div>

<p>New way:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">response</span><span class="o">.</span><span class="na">getStatusCode</span><span class="o">().</span><span class="na">value</span><span class="o">()</span>
</code></pre></div></div>

<h3 id="headers-replaced">Headers replaced</h3>

<p>Old Apache way:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Header</span><span class="o">[]</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getAllHeaders</span><span class="o">();</span>
</code></pre></div></div>

<p>New Spring way:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">HttpHeaders</span> <span class="n">headers</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getHeaders</span><span class="o">();</span>
</code></pre></div></div>

<h3 id="timeouts-are-now-builders">Timeouts are now builders</h3>

<p>The old setters no longer exist. New:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">HttpComponentsClientHttpRequestFactory</span> <span class="n">requestFactory</span> <span class="o">=</span>
    <span class="nc">ClientHttpRequestFactoryBuilder</span><span class="o">.</span><span class="na">httpComponents</span><span class="o">()</span>
        <span class="o">.</span><span class="na">withDefaultRequestConfigCustomizer</span><span class="o">(</span><span class="n">rc</span> <span class="o">-&gt;</span> <span class="n">rc</span>
            <span class="o">.</span><span class="na">setConnectTimeout</span><span class="o">(</span><span class="nc">Timeout</span><span class="o">.</span><span class="na">ofSeconds</span><span class="o">(</span><span class="mi">5</span><span class="o">))</span>
            <span class="o">.</span><span class="na">setConnectionRequestTimeout</span><span class="o">(</span><span class="nc">Timeout</span><span class="o">.</span><span class="na">ofSeconds</span><span class="o">(</span><span class="mi">5</span><span class="o">))</span>
            <span class="o">.</span><span class="na">setResponseTimeout</span><span class="o">(</span><span class="nc">Timeout</span><span class="o">.</span><span class="na">ofSeconds</span><span class="o">(</span><span class="mi">5</span><span class="o">))</span>
        <span class="o">)</span>
        <span class="o">.</span><span class="na">build</span><span class="o">();</span>
</code></pre></div></div>

<p><strong>Custom HttpClients</strong> now have to be added via <code class="language-plaintext highlighter-rouge">.withHttpClientCustomizer(...)</code>.</p>

<p><strong>Source:</strong> <a href="https://docs.spring.io/spring-framework/reference/integration/rest-clients.html#rest-request-factories">Spring Framework 7 HTTP Client</a></p>

<h2 id="apache-httpclient-4--5">Apache HttpClient 4 → 5</h2>

<p>Everything changed:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">org.apache.http.*</code> → <code class="language-plaintext highlighter-rouge">org.apache.hc.*</code></li>
  <li>Timeouts, SSL, connection managers, request builders → complete rewrite</li>
</ul>

<p><strong>Source:</strong> <a href="https://hc.apache.org/httpcomponents-client-5.6.x/migration-guide/preparation.html">Apache HttpClient 5 Migration</a></p>

<h2 id="swagger--openapi-after-jakarta">Swagger &amp; OpenAPI after Jakarta</h2>

<p>After the migration, OpenAPI annotations disappear. Add:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>io.swagger.core.v3<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>swagger-annotations-jakarta<span class="nt">&lt;/artifactId&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<p><strong>Source:</strong> <a href="https://github.com/swagger-api/swagger-core">Swagger</a></p>

<h2 id="spring-security-7-websocket">Spring Security 7 WebSocket</h2>

<p><code class="language-plaintext highlighter-rouge">AbstractSecurityWebSocketMessageBrokerConfigurer</code> is gone. For us, this approach works:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.springframework.context.annotation.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.messaging.Message</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.authorization.AuthorizationDecision</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.authorization.AuthorizationManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.config.annotation.web.messaging.EnableWebSocketSecurity</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.messaging.access.intercept.MessageAuthorizationContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.springframework.security.messaging.access.intercept.MessageMatcherDelegatingAuthorizationManager</span><span class="o">;</span>

<span class="nd">@Configuration</span>
<span class="nd">@EnableWebSocketSecurity</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WebSocketSecurityConfig</span> <span class="o">{</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">AuthorizationManager</span><span class="o">&lt;</span><span class="nc">Message</span><span class="o">&lt;?&gt;&gt;</span> <span class="n">messageAuthorizationManager</span><span class="o">(</span>
            <span class="nc">MessageMatcherDelegatingAuthorizationManager</span><span class="o">.</span><span class="na">Builder</span> <span class="n">messages</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">messages</span>
                <span class="o">.</span><span class="na">nullDestMatcher</span><span class="o">().</span><span class="na">permitAll</span><span class="o">()</span>
                <span class="o">.</span><span class="na">simpSubscribeDestMatchers</span><span class="o">(</span><span class="s">"/**"</span><span class="o">).</span><span class="na">permitAll</span><span class="o">()</span>
                <span class="o">.</span><span class="na">simpDestMatchers</span><span class="o">(</span><span class="s">"/**"</span><span class="o">).</span><span class="na">permitAll</span><span class="o">()</span>
                <span class="o">.</span><span class="na">anyMessage</span><span class="o">().</span><span class="na">permitAll</span><span class="o">();</span>
        <span class="k">return</span> <span class="n">messages</span><span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="nd">@Bean</span>
    <span class="kd">public</span> <span class="nc">AuthorizationManager</span><span class="o">&lt;</span><span class="nc">MessageAuthorizationContext</span><span class="o">&lt;?&gt;&gt;</span> <span class="n">authorizationManager</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">(</span><span class="n">_</span><span class="o">,</span> <span class="n">_</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">AuthorizationDecision</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><strong>Source:</strong> <a href="https://newreleases.io/project/github/spring-projects/spring-security/release/7.0.0-M1">Spring Security 7 WebSocket</a>,
<a href="https://github.com/spring-projects/spring-security/pull/17328">Github Thread</a></p>

<h2 id="recurring-problems">Recurring problems</h2>

<p>During the migration, most issues kept coming back, especially in tests:</p>

<ul>
  <li>Jackson namespace constantly breaks</li>
  <li>ObjectMapper conflicts in tests</li>
  <li>HTTP client configuration has to be fully rewritten</li>
  <li>Response handling methods changed</li>
  <li>RestTemplate and builders have new imports or are replaced by RestClient</li>
  <li>Tests often fail even though compilation succeeds</li>
</ul>

<p>On top of that, the compiler, serialization layer, SSL configuration, and auto-configuration all get affected at the same time by the upgrade.</p>

<h2 id="what-i-would-recommend">What I would recommend</h2>

<ul>
  <li>Plan extra time for tests</li>
  <li>Expect Jackson problems and ObjectMapper conflicts</li>
  <li>Be prepared to rewrite HTTP client code</li>
  <li>Run your full test suite early and often</li>
  <li>Use OpenRewrite</li>
</ul>

<p>Personally, I’m glad I got to do this migration myself. Despite the frustrations and all the documentation reading, it gave me a much deeper understanding of how Spring Boot and Spring Framework work and how much control they have over infrastructure and configuration.</p>

<p>Want to learn more about Spring Boot 4 and Spring Framework 7? Check out this post: <a href="https://www.baeldung.com/spring-boot-4-spring-framework-7">Spring Boot 4 &amp; Spring Framework 7</a>.</p>

<h2 id="overview-of-all-sources">Overview of all sources</h2>

<table>
  <thead>
    <tr>
      <th>Resource</th>
      <th>Link</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>OpenRewrite recipes</td>
      <td><a href="https://docs.openrewrite.org/recipes/java">https://docs.openrewrite.org/recipes/java</a></td>
    </tr>
    <tr>
      <td>Spring Framework 7 HTTP Client</td>
      <td><a href="https://docs.spring.io/spring-framework/reference/integration/rest-clients.html#rest-request-factories">https://docs.spring.io/spring-framework/reference/integration/rest-clients.html#rest-request-factories</a></td>
    </tr>
    <tr>
      <td>Apache HttpClient 5 Migration</td>
      <td><a href="https://hc.apache.org/httpcomponents-client-5.6.x/migration-guide/preparation.html">https://hc.apache.org/httpcomponents-client-5.6.x/migration-guide/preparation.html</a></td>
    </tr>
    <tr>
      <td>Swagger (swagger-core)</td>
      <td><a href="https://github.com/swagger-api/swagger-core">https://github.com/swagger-api/swagger-core</a></td>
    </tr>
    <tr>
      <td>Spring Security 7 WebSocket (PR)</td>
      <td><a href="https://github.com/spring-projects/spring-security/pull/17328">https://github.com/spring-projects/spring-security/pull/17328</a></td>
    </tr>
    <tr>
      <td>Spring Security 7 (discussion thread)</td>
      <td><a href="https://github.com/spring-projects/spring-security/pull/17328">https://github.com/spring-projects/spring-security/pull/17328</a></td>
    </tr>
    <tr>
      <td>Spring Boot 4 &amp; Spring Framework 7 (overview)</td>
      <td><a href="https://www.baeldung.com/spring-boot-4-spring-framework-7">https://www.baeldung.com/spring-boot-4-spring-framework-7</a></td>
    </tr>
  </tbody>
</table>]]></content><author><name>Oumaima Zerouali</name><email>oumaima.zerouali@gmail.com</email></author><category term="java" /><category term="spring" /><category term="migration" /><category term="openrewrite" /><category term="softwaredevelopment" /><summary type="html"><![CDATA[“I’m ready… to break everything and figure it out later!” – SpongeBob SquarePants]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://localhost:4000/assets/img/migration-to-java-25.jpg" /><media:content medium="image" url="http://localhost:4000/assets/img/migration-to-java-25.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry xml:lang="nl"><title type="html">Testcontainers in Spring Boot: Van Snelle Winst tot Geavanceerde Zetten</title><link href="http://localhost:4000/nl/2025/10/05/testcontainers/" rel="alternate" type="text/html" title="Testcontainers in Spring Boot: Van Snelle Winst tot Geavanceerde Zetten" /><published>2025-10-05T09:00:00+02:00</published><updated>2025-10-05T09:00:00+02:00</updated><id>http://localhost:4000/nl/2025/10/05/testcontainers</id><content type="html" xml:base="http://localhost:4000/nl/2025/10/05/testcontainers/"><![CDATA[<blockquote>
  <p>“Testcontainers is like having SpongeBob at the helm of your CI: cheerful, reliable, and somehow turning chaos into perfection.” - Me</p>
</blockquote>

<p>Als junior developer ben ik constant nieuwe tools en werkwijzen aan het leren.<br />
Een les van mijn senioren die echt bij me bleef hangen was deze: <em>mocking brengt je maar tot een bepaald punt</em>.<br />
Op een gegeven moment moet je testen tegen het echte werk: een echte database, een echte message broker, een echte service.</p>

<p>Toen ontdekte ik <strong>Testcontainers</strong>, en het veranderde volledig hoe ik integratietests schrijf in Java en Spring Boot.<br />
Na ermee te hebben geëxperimenteerd en mijn bevindingen te hebben gedeeld met collega’s, besefte ik dat ik alles wat ik had geleerd op één plek wilde vastleggen.</p>

<p>Deze post is mijn poging dat te doen: het uitleggen van het <strong>waarom</strong>, het <strong>hoe</strong>, en de <strong>praktijkpatronen</strong> die ik nu in mijn projecten gebruik.</p>

<h2 id="het-probleem-dat-ik-eerder-had">Het Probleem dat Ik Eerder Had</h2>
<p>Ik moet toegeven:<br />
ik probeerde integratietests altijd te vermijden wanneer ik kon.<br />
Mocks waren mijn beste vrienden: snel, voorspelbaar, en makkelijk op te zetten.</p>

<p>Maar hoe graag ik ze ook gebruikte, sommige dingen kun je gewoon niet faken.<br />
Een mailserver, een echte PostgreSQL-database — geen enkele mock kon dat echt repliceren.</p>

<p>Ik liep al snel tegen dezelfde frustrerende scenario’s aan die we allemaal kennen: tests die op mijn machine slagen maar falen in CI, of collega’s die uren besteden aan het klaarmaken van de omgeving om tests te kunnen draaien.</p>

<p>Voor een Spring Boot-app die PostgreSQL nodig heeft en e-mails verstuurt, zien de opties er zo uit:</p>

<table>
  <thead>
    <tr>
      <th>Benadering</th>
      <th>Voordelen</th>
      <th>Nadelen</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Lokale installatie</strong><br />Installeer PostgreSQL &amp; SMTP lokaal</td>
      <td>- Testen tegen echte services<br /> - Geen mocking nodig</td>
      <td>- Verschillende versies op verschillende machines<br /> - “Werkt op mijn laptop” syndroom<br /> - Pijnlijke CI-setup<br /> - Achtergebleven testdata</td>
    </tr>
    <tr>
      <td><strong>Alles mocken</strong><br />Gebruik mock databases &amp; services</td>
      <td>- Snelle testuitvoering<br /> - Geen externe afhankelijkheden</td>
      <td>- Test geen echte integratie<br /> - Mocks wijken af van de werkelijkheid<br /> - Valse zekerheid</td>
    </tr>
    <tr>
      <td><strong>Testcontainers</strong><br />Echte services in Docker</td>
      <td>- Echte integratietests<br /> - Consistent op alle machines<br /> - Geen installatie gedoe<br /> - Schone staat bij elke run</td>
      <td>- Vereist Docker<br /> - Iets langzamer dan mocks</td>
    </tr>
  </tbody>
</table>

<p><strong>Testcontainers</strong> was de game-changer die ik nodig had.</p>

<h2 id="snel-aan-de-slag">Snel aan de Slag</h2>

<p>Voordat ik dieper inga, eerst een setup:</p>

<p><strong>Vereisten:</strong></p>
<ul>
  <li>Java <strong>21+</strong></li>
  <li>Maven</li>
  <li>Docker Desktop draaiend</li>
</ul>

<p><strong>Dependencies toevoegen:</strong></p>

<p>Maven:</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.testcontainers<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>junit-jupiter<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.testcontainers<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>postgresql<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<h2 id="de-standaardaanpak-goed-maar-beperkt">De Standaardaanpak (Goed, Maar Beperkt)</h2>

<p>De meeste tutorials laten dit zien, en eerlijk, het werkt prima voor eenvoudige cases:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Testcontainers</span>
<span class="nd">@DataJpaTest</span>
<span class="kd">class</span> <span class="nc">UserRepositoryTest</span> <span class="o">{</span>

    <span class="nd">@Container</span>
    <span class="kd">static</span> <span class="nc">PostgreSQLContainer</span><span class="o">&lt;?&gt;</span> <span class="n">postgres</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PostgreSQLContainer</span><span class="o">&lt;&gt;(</span><span class="s">"postgres:16-alpine"</span><span class="o">);</span>
    
    <span class="nd">@DynamicPropertySource</span>
    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">configureProperties</span><span class="o">(</span><span class="nc">DynamicPropertyRegistry</span> <span class="n">registry</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">registry</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"spring.datasource.url"</span><span class="o">,</span> <span class="nl">postgres:</span><span class="o">:</span><span class="n">getJdbcUrl</span><span class="o">);</span>
        <span class="n">registry</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"spring.datasource.username"</span><span class="o">,</span> <span class="nl">postgres:</span><span class="o">:</span><span class="n">getUsername</span><span class="o">);</span>
        <span class="n">registry</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"spring.datasource.password"</span><span class="o">,</span> <span class="nl">postgres:</span><span class="o">:</span><span class="n">getPassword</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="nd">@Autowired</span>
    <span class="nc">UserRepository</span> <span class="n">userRepository</span><span class="o">;</span>
    
    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">givenNewUser_whenSaving_thenUserIsPersisted</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">(</span><span class="s">"Spongebob"</span><span class="o">);</span>
        <span class="n">userRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findAll</span><span class="o">().</span><span class="na">size</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Perfect voor eenvoudige gevallen. JUnit start een PostgreSQL-container, Spring Boot configureert deze via <code class="language-plaintext highlighter-rouge">@DynamicPropertySource</code>, de test draait tegen een echte database, en de container wordt netjes opgeruimd na afloop.</p>

<h3 id="wat-gebeurt-er-achter-de-schermen">Wat Gebeurt Er Achter de Schermen?</h3>

<p>Wanneer je op “Run Test” klikt, gebeurt dit (vereenvoudigd):</p>

<p align="center">
    <img src="/assets/img/simplified.svg" alt="Achter de schermen (vereenvoudigd)" style="height: 550px" />
</p>

<p>Het wachten is cruciaal.
Testcontainers kijkt niet alleen of de poort open is, maar wacht totdat de service daadwerkelijk klaar is om verbindingen te accepteren.
Daarom werken je tests “gewoon” zonder flakey failures.</p>

<p>Maar in echte projecten liep ik al snel tegen situaties aan waarbij ik moest:</p>

<ul>
  <li>Meerdere containers starten die met elkaar praten</li>
  <li>Mijn database vooraf vullen met schema of seed data</li>
  <li>Wachten tot een REST API klaar is, niet alleen een poort</li>
  <li>E-mails testen tegen een fake SMTP-server</li>
</ul>

<p>Daar wordt het pas interessant…</p>

<h2 id="volgende-stap-applicationcontextinitializer">Volgende Stap: ApplicationContextInitializer</h2>

<p>Wanneer ik meer controle nodig heb, biedt Spring Boot een krachtige hook:
<strong><code class="language-plaintext highlighter-rouge">ApplicationContextInitializer&lt;ConfigurableApplicationContext&gt;</code></strong>.</p>

<p>Dit draait <strong>voordat</strong> je applicatiecontext start, en laat je toe om:</p>

<ul>
  <li>Containers handmatig te starten met volledige controle</li>
  <li>Complexe wachtstrategieën te configureren</li>
  <li>Custom properties in Spring’s environment te injecteren</li>
  <li>Containerconfiguraties te hergebruiken over meerdere testklassen</li>
</ul>

<p>Ik zie dit als de “professionele” manier om Testcontainers in Spring Boot op te zetten.</p>

<h3 id="hoe-de-professionele-setup-werkt">Hoe de Professionele Setup Werkt</h3>

<p>Wanneer je <code class="language-plaintext highlighter-rouge">ApplicationContextInitializer</code> gebruikt, gebeurt dit:</p>

<p align="center">
    <img src="/assets/img/testcontainers.svg" alt="Wat gebeurt bij ApplicationContextInitializer" style="height: 550px" />
</p>

<p>Je krijgt volledige controle over de opstartvolgorde en kunt containers precies configureren zoals jij wilt.</p>

<h3 id="praktijkvoorbeeld-e-mails-testen-met-smtp4dev-of-mailpit">Praktijkvoorbeeld: E-mails testen met smtp4dev (of Mailpit)</h3>

<p>Mijn app verstuurt e-mails, en ik moest realistisch testen zonder echte inboxen te spammen.</p>

<p><strong>smtp4dev</strong> is een fake SMTP-server die e-mails opvangt en via een REST API beschikbaar stelt.
Het bestaat al jaren, is volwassen en biedt features zoals relay-testing en authenticatiesimulatie.
Perfect voor uitgebreide e-mailtests.</p>

<p><strong>Mailpit</strong> is een modern alternatief geschreven in Go: lichter, sneller opstartend, en met een strakke UI.
Ook uitstekende zoekfunctionaliteit en ingebouwde spam-analyse.
Voor nieuwe projecten in 2025 is Mailpit vaak de go-to, maar smtp4dev blijft solide voor bestaande projecten.</p>

<p>Beide bieden REST APIs, ondersteunen SMTP-authenticatie en hebben een web UI voor handmatige inspectie.
Belangrijkste verschillen:</p>

<ul>
  <li><strong>Performance</strong>: Mailpit start sneller en gebruikt minder geheugen (~10-20MB vs ~50-100MB)</li>
  <li><strong>UI</strong>: Mailpit heeft een moderne, responsive interface</li>
  <li><strong>Features</strong>: smtp4dev heeft meer enterprise-features; Mailpit focust op eenvoud</li>
  <li><strong>Docker grootte</strong>: Mailpit image is kleiner (~15MB vs ~200MB)</li>
</ul>

<p>Voor de meeste Spring Boot integratietests werkt beide prima.
Hier laat ik smtp4dev zien, maar switchen naar Mailpit is simpel door de image naam te veranderen.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Smtp4devTestContainerInitializer</span> <span class="kd">implements</span> <span class="nc">ApplicationContextInitializer</span><span class="o">&lt;</span><span class="nc">ConfigurableApplicationContext</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">GenericContainer</span><span class="o">&lt;?&gt;</span> <span class="n">smtp4devContainer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GenericContainer</span><span class="o">&lt;&gt;(</span><span class="nc">DockerImageName</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"rnwood/smtp4dev:3.10.3"</span><span class="o">))</span>
        <span class="o">.</span><span class="na">withExposedPorts</span><span class="o">(</span><span class="mi">80</span><span class="o">,</span> <span class="mi">25</span><span class="o">)</span>
        <span class="o">.</span><span class="na">waitingFor</span><span class="o">(</span><span class="nc">Wait</span><span class="o">.</span><span class="na">forHttp</span><span class="o">(</span><span class="s">"/api/messages"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">forPort</span><span class="o">(</span><span class="mi">80</span><span class="o">)</span>
        <span class="o">.</span><span class="na">forStatusCode</span><span class="o">(</span><span class="mi">200</span><span class="o">));</span>
    
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="nc">ConfigurableApplicationContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">smtp4devContainer</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        
        <span class="nc">TestPropertyValues</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
        <span class="s">"spring.mail.host="</span> <span class="o">+</span> <span class="n">smtp4devContainer</span><span class="o">.</span><span class="na">getHost</span><span class="o">(),</span>
        <span class="s">"spring.mail.port="</span> <span class="o">+</span> <span class="n">smtp4devContainer</span><span class="o">.</span><span class="na">getMappedPort</span><span class="o">(</span><span class="mi">25</span><span class="o">)</span>
        <span class="o">).</span><span class="na">applyTo</span><span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">getEnvironment</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Nu in een test:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@SpringBootTest</span>
<span class="nd">@ContextConfiguration</span><span class="o">(</span><span class="n">initializers</span> <span class="o">=</span> <span class="nc">Smtp4devTestContainerInitializer</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">class</span> <span class="nc">KrustyKrabEmailServiceTest</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
    <span class="nc">EmailService</span> <span class="n">emailService</span><span class="o">;</span>
    
    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">givenBikiniBottomCitizen_whenSendingWelcome_thenMessageSends</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">emailService</span><span class="o">.</span><span class="na">sendWelcome</span><span class="o">(</span><span class="s">"patrick.star@bikinibottom.com"</span><span class="o">);</span>
        
        <span class="nc">RestTemplate</span> <span class="n">rest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RestTemplate</span><span class="o">();</span>
        <span class="nc">String</span> <span class="n">messagesApi</span> <span class="o">=</span> <span class="s">"http://"</span> <span class="o">+</span>
        <span class="nc">Smtp4devTestContainerInitializer</span><span class="o">.</span><span class="na">smtp4devContainer</span><span class="o">.</span><span class="na">getHost</span><span class="o">()</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span>
        <span class="nc">Smtp4devTestContainerInitializer</span><span class="o">.</span><span class="na">smtp4devContainer</span><span class="o">.</span><span class="na">getMappedPort</span><span class="o">(</span><span class="mi">80</span><span class="o">)</span> <span class="o">+</span>
        <span class="s">"/api/messages"</span><span class="o">;</span>
        
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;&gt;</span> <span class="n">messages</span> <span class="o">=</span> <span class="n">rest</span><span class="o">.</span><span class="na">getForObject</span><span class="o">(</span><span class="n">messagesApi</span><span class="o">,</span> <span class="nc">List</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        
        <span class="n">assertEquals</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">messages</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">messages</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="s">"subject"</span><span class="o">).</span><span class="na">toString</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">"Welcome"</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Belangrijke punten:</p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">withExposedPorts(80, 25)</code></strong> → web UI + SMTP poort openstellen</li>
  <li><strong><code class="language-plaintext highlighter-rouge">waitingFor(Wait.forHttp(...))</code></strong> → wachten tot de API echt klaar is</li>
  <li><strong><code class="language-plaintext highlighter-rouge">TestPropertyValues</code></strong> → configureert container-instellingen in Spring</li>
</ul>

<p>Wil je <strong>Mailpit</strong> gebruiken? Zo ziet de initializer eruit:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MailpitTestContainerInitializer</span> <span class="kd">implements</span> <span class="nc">ApplicationContextInitializer</span><span class="o">&lt;</span><span class="nc">ConfigurableApplicationContext</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">GenericContainer</span><span class="o">&lt;?&gt;</span> <span class="n">mailpitContainer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GenericContainer</span><span class="o">&lt;&gt;(</span><span class="nc">DockerImageName</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"axllent/mailpit:v1.27.8"</span><span class="o">))</span>
        <span class="o">.</span><span class="na">withExposedPorts</span><span class="o">(</span><span class="mi">8025</span><span class="o">,</span> <span class="mi">1025</span><span class="o">)</span>
        <span class="o">.</span><span class="na">waitingFor</span><span class="o">(</span><span class="nc">Wait</span><span class="o">.</span><span class="na">forHttp</span><span class="o">(</span><span class="s">"/api/v1/messages"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">forPort</span><span class="o">(</span><span class="mi">8025</span><span class="o">)</span>
        <span class="o">.</span><span class="na">forStatusCode</span><span class="o">(</span><span class="mi">200</span><span class="o">));</span>
    
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="nc">ConfigurableApplicationContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">mailpitContainer</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        
        <span class="nc">TestPropertyValues</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
        <span class="s">"spring.mail.host="</span> <span class="o">+</span> <span class="n">mailpitContainer</span><span class="o">.</span><span class="na">getHost</span><span class="o">(),</span>
        <span class="s">"spring.mail.port="</span> <span class="o">+</span> <span class="n">mailpitContainer</span><span class="o">.</span><span class="na">getMappedPort</span><span class="o">(</span><span class="mi">1025</span><span class="o">)</span>
        <span class="o">).</span><span class="na">applyTo</span><span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">getEnvironment</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Verschillen:</p>

<ul>
  <li>Poort 8025 voor web UI (ipv 80 bij smtp4dev)</li>
  <li>Poort 1025 voor SMTP (ipv 25)</li>
  <li>API pad <code class="language-plaintext highlighter-rouge">/api/v1/messages</code> ipv <code class="language-plaintext highlighter-rouge">/api/messages</code></li>
</ul>

<p>Beide werken identiek in je tests. Kies smtp4dev voor geavanceerde relay-features of bestaande projecten, Mailpit voor snelle opstart en kleine Docker footprint.</p>

<h3 id="postgresql-met-initialisatie-scripts">PostgreSQL met Initialisatie Scripts</h3>

<p>Soms wil ik geen lege database, maar schema + seed data laden:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestDatabaseInitializer</span> <span class="kd">implements</span> <span class="nc">ApplicationContextInitializer</span><span class="o">&lt;</span><span class="nc">ConfigurableApplicationContext</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">PostgreSQLContainer</span><span class="o">&lt;?&gt;</span> <span class="n">postgres</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PostgreSQLContainer</span><span class="o">&lt;&gt;(</span><span class="s">"postgres:16-alpine"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">withDatabaseName</span><span class="o">(</span><span class="s">"myapp"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">withCopyFileToContainer</span><span class="o">(</span><span class="nc">MountableFile</span><span class="o">.</span><span class="na">forClasspathResource</span><span class="o">(</span><span class="s">"init_schema.sql"</span><span class="o">),</span> <span class="s">"/docker-entrypoint-initdb.d/"</span><span class="o">);</span>
    
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="nc">ConfigurableApplicationContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">postgres</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        
        <span class="nc">TestPropertyValues</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
        <span class="s">"spring.datasource.url="</span> <span class="o">+</span> <span class="n">postgres</span><span class="o">.</span><span class="na">getJdbcUrl</span><span class="o">(),</span>
        <span class="s">"spring.datasource.username="</span> <span class="o">+</span> <span class="n">postgres</span><span class="o">.</span><span class="na">getUsername</span><span class="o">(),</span>
        <span class="s">"spring.datasource.password="</span> <span class="o">+</span> <span class="n">postgres</span><span class="o">.</span><span class="na">getPassword</span><span class="o">()</span>
        <span class="o">).</span><span class="na">applyTo</span><span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">getEnvironment</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>De truc: <strong><code class="language-plaintext highlighter-rouge">withCopyFileToContainer</code></strong> → schema in <code class="language-plaintext highlighter-rouge">/docker-entrypoint-initdb.d/</code> plaatsen. Postgres voert dit automatisch uit bij opstart.</p>

<h2 id="gespecialiseerde-containers-vs-genericcontainer">Gespecialiseerde Containers vs GenericContainer</h2>

<p>Je ziet dat ik zowel <code class="language-plaintext highlighter-rouge">PostgreSQLContainer</code> als <code class="language-plaintext highlighter-rouge">GenericContainer</code> heb gebruikt.</p>

<p>Regel van thumb:</p>

<ul>
  <li><strong>Gebruik gespecialiseerde containers</strong> als ze bestaan (<code class="language-plaintext highlighter-rouge">PostgreSQLContainer</code>, <code class="language-plaintext highlighter-rouge">MongoDBContainer</code>, <code class="language-plaintext highlighter-rouge">KafkaContainer</code>, …) → handige defaults en shortcuts</li>
  <li><strong>Gebruik <code class="language-plaintext highlighter-rouge">GenericContainer</code></strong> voor alles wat geen module heeft (smtp4dev, Mailpit, custom images)</li>
</ul>

<p>Denk aan <code class="language-plaintext highlighter-rouge">GenericContainer</code> als het <strong>Zwitsers zakmes</strong> van Testcontainers. Alles anders bouwt hierop voort.</p>

<h2 id="tips-uit-de-praktijk">Tips uit de praktijk</h2>

<h4 id="containers-hergebruiken-over-tests"><strong>Containers hergebruiken over tests</strong></h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Container</span>
<span class="kd">static</span> <span class="nc">PostgreSQLContainer</span><span class="o">&lt;?&gt;</span> <span class="n">postgres</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PostgreSQLContainer</span><span class="o">&lt;&gt;(</span><span class="s">"postgres:16.3"</span><span class="o">);</span>
</code></pre></div></div>

<p>Maak ze <code class="language-plaintext highlighter-rouge">static</code> om herstarten per methode te vermijden. Waarom dit belangrijk is:</p>

<p align="center">
    <img src="/assets/img/static_1.svg" alt="Zonder static" style="height: 550px; margin-bottom: -400px; margin-top: -200px" />
    <img src="/assets/img/static_2.svg" alt="Met static" style="height: 550px; margin-top: -100px; margin-bottom: -200px" />
</p>

<h4 id="pin-image-versies"><strong>Pin image versies</strong></h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nc">PostgreSQLContainer</span><span class="o">&lt;&gt;(</span><span class="s">"postgres:16-alpine"</span><span class="o">);</span> <span class="c1">// stabiel</span>
<span class="k">new</span> <span class="nc">PostgreSQLContainer</span><span class="o">&lt;&gt;(</span><span class="s">"postgres:latest"</span><span class="o">);</span> <span class="c1">// risicovol</span>
</code></pre></div></div>

<h4 id="initializers-delen-tussen-testklassen"><strong>Initializers delen</strong> tussen testklassen</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@SpringBootTest</span>
<span class="nd">@ContextConfiguration</span><span class="o">(</span><span class="n">initializers</span> <span class="o">=</span> <span class="o">{</span>
<span class="nc">TestDatabaseInitializer</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
<span class="nc">Smtp4devTestContainerInitializer</span><span class="o">.</span><span class="na">class</span>
<span class="o">})</span>
<span class="kd">class</span> <span class="nc">MyIntegrationTest</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
</code></pre></div></div>

<h4 id="maak-je-geen-zorgen-om-test-snelheid"><strong>Maak je geen zorgen om test snelheid</strong></h4>

<p>Ja, Docker-containers nemen een paar seconden om te starten.
Maar met static containers en hergebruik is de opstarttijd minimaal vergeleken met de zekerheid die je krijgt.
Mijn test suite met PostgreSQL en smtp4dev voegt misschien 5–10 seconden toe — de moeite waard.</p>

<h4 id="check-logs-bij-debuggen"><strong>Check logs bij debuggen</strong></h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">postgres</span><span class="o">.</span><span class="na">getLogs</span><span class="o">());</span>
</code></pre></div></div>

<h2 id="afronden">Afronden</h2>

<p>Testcontainers heeft mijn manier van integratietesten volledig veranderd.</p>

<p>Ik begon met <code class="language-plaintext highlighter-rouge">@Container</code> en <code class="language-plaintext highlighter-rouge">@DynamicPropertySource</code> voor eenvoudige gevallen.
Wanneer ik meer controle nodig had, gebruikte ik <code class="language-plaintext highlighter-rouge">ApplicationContextInitializer</code>.
En bij testen tegen elke Docker image bood <code class="language-plaintext highlighter-rouge">GenericContainer</code> uitkomst.</p>

<p>Het mooie: ik test altijd <strong>tegen het echte werk</strong>.
Echte databases, echte SMTP-servers, echte API’s, zonder de traditionele ellende van lokaal beheer.</p>

<p>Als je Testcontainers nog niet gebruikt, probeer het dan zeker in je volgende Spring Boot-project.
Je toekomstige zelf (en je team) zal je dankbaar zijn.</p>

<p>Ga nu aan de slag en containerize je tests!</p>

<h2 id="bronnen">Bronnen</h2>

<p><strong>Officiële documentatie:</strong></p>

<ul>
  <li><a href="https://www.testcontainers.org/">Testcontainers Official Documentation</a></li>
  <li><a href="https://java.testcontainers.org/">Testcontainers for Java</a></li>
  <li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.testing">Spring Boot Testing Documentation</a></li>
</ul>

<p><strong>Docker images gebruikt:</strong></p>

<ul>
  <li><a href="https://hub.docker.com/_/postgres">PostgreSQL on Docker Hub</a></li>
  <li><a href="https://github.com/rnwood/smtp4dev">smtp4dev on GitHub</a></li>
  <li><a href="https://github.com/axllent/mailpit">Mailpit on GitHub</a></li>
</ul>

<p><strong>Gerelateerde tools:</strong></p>

<ul>
  <li><a href="https://www.docker.com/products/docker-desktop/">Docker Desktop</a></li>
  <li><a href="https://mvnrepository.com/artifact/org.testcontainers">Maven Central - Testcontainers</a></li>
</ul>]]></content><author><name>Oumaima Zerouali</name><email>oumaima.zerouali@gmail.com</email></author><category term="java" /><category term="spring-boot" /><category term="testing" /><category term="docker" /><summary type="html"><![CDATA[“Testcontainers is like having SpongeBob at the helm of your CI: cheerful, reliable, and somehow turning chaos into perfection.” - Me]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://localhost:4000/assets/img/spongebob-testcontainers.png" /><media:content medium="image" url="http://localhost:4000/assets/img/spongebob-testcontainers.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry xml:lang="en"><title type="html">Testcontainers in Spring Boot: From Quick Wins to Power Moves</title><link href="http://localhost:4000/2025/10/05/testcontainers/" rel="alternate" type="text/html" title="Testcontainers in Spring Boot: From Quick Wins to Power Moves" /><published>2025-10-05T09:00:00+02:00</published><updated>2025-10-05T09:00:00+02:00</updated><id>http://localhost:4000/2025/10/05/testcontainers</id><content type="html" xml:base="http://localhost:4000/2025/10/05/testcontainers/"><![CDATA[<blockquote>
  <p>“Testcontainers is like having SpongeBob at the helm of your CI: cheerful, reliable, and somehow turning chaos into perfection.” - Me</p>
</blockquote>

<p>As a junior developer, I’m constantly learning new tools and practices.
One lesson from my seniors that really stuck with me was this: <em>mocking will only take you so far</em>.
At some point, you need to test against the real thing: a real database, a real message broker, a real service.</p>

<p>That’s when I discovered <strong>Testcontainers</strong>, and it completely changed how I write integration tests in Java and Spring Boot.
After experimenting with it and sharing my findings with colleagues, I realized I wanted to capture everything I’d learned in one place.</p>

<p>This post is my attempt to do just that: explaining the why, the how, and the real-world patterns I now use in my projects.</p>

<h2 id="the-problem-i-used-to-have">The Problem I Used to Have</h2>
<p>I have to admit.
I used to avoid integration tests whenever I could.
Mocks were my best friends: fast, predictable, and easy to set up.</p>

<p>But as much as I loved them, some things just can’t be faked.
A mail server, a real PostgreSQL database, no amount of mocking could truly replicate them.</p>

<p>I quickly ran into the same frustrating scenarios we’ve all seen: tests that pass on my machine but fail in CI, or teammates spending hours just to get the environment ready to run tests.</p>

<p>For a Spring Boot app that needs PostgreSQL and sends emails, here’s how the options stack up:</p>

<table>
  <thead>
    <tr>
      <th>Approach</th>
      <th>Pros</th>
      <th>Cons</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Local Installation</strong><br />Install PostgreSQL &amp; SMTP locally</td>
      <td>- Tests against real services<br /> - No mocking</td>
      <td>- Different versions across machines<br /> - “Works on my laptop” syndrome<br /> - Painful CI setup<br /> - Leftover test data pollution</td>
    </tr>
    <tr>
      <td><strong>Mock Everything</strong><br />Use mock databases &amp; services</td>
      <td>- Fast test execution<br /> - No external dependencies</td>
      <td>- Not testing real integration<br /> - Mocks drift from reality<br /> - False confidence</td>
    </tr>
    <tr>
      <td><strong>Testcontainers</strong><br />Real services in Docker</td>
      <td>- Real integration testing<br /> - Consistent across all machines<br /> - Zero installation hassle<br /> - Clean state every run</td>
      <td>- Requires Docker<br /> - Slightly slower than mocks</td>
    </tr>
  </tbody>
</table>

<p><strong>Testcontainers</strong> was the game-changer I needed.</p>

<h2 id="quick-setup">Quick Setup</h2>

<p>Before I dive deep, let me get you set up:</p>

<p><strong>Prerequisites:</strong></p>
<ul>
  <li>Java <strong>21+</strong></li>
  <li>Maven</li>
  <li>Docker Desktop running</li>
</ul>

<p><strong>Add the dependencies:</strong></p>

<p>Maven:</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.testcontainers<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>junit-jupiter<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>

<span class="nt">&lt;dependency&gt;</span>
    <span class="nt">&lt;groupId&gt;</span>org.testcontainers<span class="nt">&lt;/groupId&gt;</span>
    <span class="nt">&lt;artifactId&gt;</span>postgresql<span class="nt">&lt;/artifactId&gt;</span>
    <span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>

<h2 id="the-standard-approach-good-but-limited">The Standard Approach (Good, But Limited)</h2>

<p>Here’s what most tutorials show you, and honestly, it’s great for simple cases:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Testcontainers</span>
<span class="nd">@DataJpaTest</span>
<span class="kd">class</span> <span class="nc">UserRepositoryTest</span> <span class="o">{</span>

    <span class="nd">@Container</span>
    <span class="kd">static</span> <span class="nc">PostgreSQLContainer</span><span class="o">&lt;?&gt;</span> <span class="n">postgres</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PostgreSQLContainer</span><span class="o">&lt;&gt;(</span><span class="s">"postgres:16-alpine"</span><span class="o">);</span>
    
    <span class="nd">@DynamicPropertySource</span>
    <span class="kd">static</span> <span class="kt">void</span> <span class="nf">configureProperties</span><span class="o">(</span><span class="nc">DynamicPropertyRegistry</span> <span class="n">registry</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">registry</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"spring.datasource.url"</span><span class="o">,</span> <span class="nl">postgres:</span><span class="o">:</span><span class="n">getJdbcUrl</span><span class="o">);</span>
        <span class="n">registry</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"spring.datasource.username"</span><span class="o">,</span> <span class="nl">postgres:</span><span class="o">:</span><span class="n">getUsername</span><span class="o">);</span>
        <span class="n">registry</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">"spring.datasource.password"</span><span class="o">,</span> <span class="nl">postgres:</span><span class="o">:</span><span class="n">getPassword</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="nd">@Autowired</span>
    <span class="nc">UserRepository</span> <span class="n">userRepository</span><span class="o">;</span>
    
    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">givenNewUser_whenSaving_thenUserIsPersisted</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">User</span> <span class="n">user</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">User</span><span class="o">(</span><span class="s">"Spongebob"</span><span class="o">);</span>
        <span class="n">userRepository</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">user</span><span class="o">);</span>
        <span class="n">assertEquals</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">userRepository</span><span class="o">.</span><span class="na">findAll</span><span class="o">().</span><span class="na">size</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>This is <strong>beautiful</strong> for simple cases. JUnit starts a PostgreSQL container, Spring Boot wires it up via <code class="language-plaintext highlighter-rouge">@DynamicPropertySource</code>, your test runs against a real database, and the container gets cleaned up afterward.</p>

<h3 id="what-actually-happens-behind-the-scenes">What Actually Happens Behind the Scenes?</h3>

<p>When you hit “Run Test”, here’s the magic that unfolds (simplified):</p>

<p align="center">
    <img src="/assets/img/simplified.svg" alt="Behind the scenes (simplified)" style="height: 550px" />
</p>

<p>The waiting phase is crucial. 
Testcontainers doesn’t just check if the port is open, it waits until the service is actually ready to accept connections. 
This is why your tests “just work” without flaky failures.</p>

<p>But in real projects, I quickly ran into situations where I needed to:</p>

<ul>
  <li>Start multiple containers that talk to each other</li>
  <li>Preload my database with schema or seed data</li>
  <li>Wait for a REST API to be ready, not just a port</li>
  <li>Test email sending against a fake SMTP server</li>
</ul>

<p>That’s where things get interesting….</p>

<h2 id="level-up-applicationcontextinitializer">Level Up: ApplicationContextInitializer</h2>

<p>When I need more control, Spring Boot gives me a powerful hook:
<strong><code class="language-plaintext highlighter-rouge">ApplicationContextInitializer&lt;ConfigurableApplicationContext&gt;</code></strong>.</p>

<p>This runs <strong>before</strong> your application context starts, letting you:</p>

<ul>
  <li>Start containers manually with full control</li>
  <li>Configure complex wait strategies</li>
  <li>Inject custom properties into Spring’s environment</li>
  <li>Reuse container configurations across multiple test classes</li>
</ul>

<p>I think of it as the “professional” way to wire up Testcontainers in Spring Boot.</p>

<h3 id="how-the-professional-setup-works">How the Professional Setup Works</h3>

<p>Here’s what happens when you use <code class="language-plaintext highlighter-rouge">ApplicationContextInitializer</code>:</p>

<p align="center">
    <img src="/assets/img/testcontainers.svg" alt="What happens when you use ApplicationContextInitializer" style="height: 550px" />
</p>

<p>This gives you complete control over the startup sequence and lets you configure containers exactly how you need them.</p>

<h3 id="real-world-example-testing-email-with-smtp4dev-or-mailpit">Real-World Example: Testing Email with smtp4dev (or Mailpit)</h3>

<p>My app sends emails, and I needed to test that realistically without spamming real inboxes.</p>

<p><strong>smtp4dev</strong> is a fake SMTP server that catches emails and exposes them via REST API. 
It’s been around for years, has a mature codebase, and includes features like relay testing and authentication simulation. 
Perfect for comprehensive email testing scenarios.</p>

<p><strong>Mailpit</strong> is a modern alternative written in Go, known for its lightweight footprint, faster startup times, and slick UI. 
It also has excellent search capabilities and built-in spam score analysis. 
If you’re starting fresh, Mailpit is often the go-to choice in 2025, but smtp4dev remains solid for existing projects.</p>

<p>Both expose REST APIs for programmatic testing, support SMTP authentication, and provide web UIs for manual inspection. 
The main differences:</p>

<ul>
  <li><strong>Performance</strong>: Mailpit starts faster and uses less memory (~10-20MB vs ~50-100MB)</li>
  <li><strong>UI</strong>: Mailpit has a more modern, responsive interface</li>
  <li><strong>Features</strong>: smtp4dev has more enterprise features (relay, conditional rules); Mailpit focuses on simplicity</li>
  <li><strong>Docker size</strong>: Mailpit image is smaller (~15MB vs ~200MB)</li>
</ul>

<p>For most Spring Boot integration tests, either works great. 
I’ll show you smtp4dev here, but switching to Mailpit is as simple as changing the image name.</p>

<p>Here’s smtp4dev in action:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Smtp4devTestContainerInitializer</span> <span class="kd">implements</span> <span class="nc">ApplicationContextInitializer</span><span class="o">&lt;</span><span class="nc">ConfigurableApplicationContext</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">GenericContainer</span><span class="o">&lt;?&gt;</span> <span class="n">smtp4devContainer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GenericContainer</span><span class="o">&lt;&gt;(</span><span class="nc">DockerImageName</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"rnwood/smtp4dev:3.10.3"</span><span class="o">))</span>
        <span class="o">.</span><span class="na">withExposedPorts</span><span class="o">(</span><span class="mi">80</span><span class="o">,</span> <span class="mi">25</span><span class="o">)</span>
        <span class="o">.</span><span class="na">waitingFor</span><span class="o">(</span><span class="nc">Wait</span><span class="o">.</span><span class="na">forHttp</span><span class="o">(</span><span class="s">"/api/messages"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">forPort</span><span class="o">(</span><span class="mi">80</span><span class="o">)</span>
        <span class="o">.</span><span class="na">forStatusCode</span><span class="o">(</span><span class="mi">200</span><span class="o">));</span>
    
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="nc">ConfigurableApplicationContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">smtp4devContainer</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        
        <span class="nc">TestPropertyValues</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
        <span class="s">"spring.mail.host="</span> <span class="o">+</span> <span class="n">smtp4devContainer</span><span class="o">.</span><span class="na">getHost</span><span class="o">(),</span>
        <span class="s">"spring.mail.port="</span> <span class="o">+</span> <span class="n">smtp4devContainer</span><span class="o">.</span><span class="na">getMappedPort</span><span class="o">(</span><span class="mi">25</span><span class="o">)</span>
        <span class="o">).</span><span class="na">applyTo</span><span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">getEnvironment</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Now in a test:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@SpringBootTest</span>
<span class="nd">@ContextConfiguration</span><span class="o">(</span><span class="n">initializers</span> <span class="o">=</span> <span class="nc">Smtp4devTestContainerInitializer</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
<span class="kd">class</span> <span class="nc">KrustyKrabEmailServiceTest</span> <span class="o">{</span>

    <span class="nd">@Autowired</span>
    <span class="nc">EmailService</span> <span class="n">emailService</span><span class="o">;</span>
    
    <span class="nd">@Test</span>
    <span class="kt">void</span> <span class="nf">givenBikiniBottomCitizen_whenSendingWelcome_thenMessageSends</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">emailService</span><span class="o">.</span><span class="na">sendWelcome</span><span class="o">(</span><span class="s">"patrick.star@bikinibottom.com"</span><span class="o">);</span>
        
        <span class="nc">RestTemplate</span> <span class="n">rest</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RestTemplate</span><span class="o">();</span>
        <span class="nc">String</span> <span class="n">messagesApi</span> <span class="o">=</span> <span class="s">"http://"</span> <span class="o">+</span>
        <span class="nc">Smtp4devTestContainerInitializer</span><span class="o">.</span><span class="na">smtp4devContainer</span><span class="o">.</span><span class="na">getHost</span><span class="o">()</span> <span class="o">+</span> <span class="s">":"</span> <span class="o">+</span>
        <span class="nc">Smtp4devTestContainerInitializer</span><span class="o">.</span><span class="na">smtp4devContainer</span><span class="o">.</span><span class="na">getMappedPort</span><span class="o">(</span><span class="mi">80</span><span class="o">)</span> <span class="o">+</span>
        <span class="s">"/api/messages"</span><span class="o">;</span>
        
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Object</span><span class="o">&gt;&gt;</span> <span class="n">messages</span> <span class="o">=</span> <span class="n">rest</span><span class="o">.</span><span class="na">getForObject</span><span class="o">(</span><span class="n">messagesApi</span><span class="o">,</span> <span class="nc">List</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
        
        <span class="n">assertEquals</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="n">messages</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
        <span class="n">assertThat</span><span class="o">(</span><span class="n">messages</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="na">get</span><span class="o">(</span><span class="s">"subject"</span><span class="o">).</span><span class="na">toString</span><span class="o">()).</span><span class="na">isEqualTo</span><span class="o">(</span><span class="s">"Welcome"</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Key things:</p>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">withExposedPorts(80, 25)</code></strong> exposes the web UI + SMTP port</li>
  <li><strong><code class="language-plaintext highlighter-rouge">waitingFor(Wait.forHttp(...))</code></strong> waits until the API is really alive</li>
  <li><strong><code class="language-plaintext highlighter-rouge">TestPropertyValues</code></strong> wires the container config into Spring</li>
</ul>

<p>Want to use <strong>Mailpit</strong> instead? Here’s the equivalent initializer:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MailpitTestContainerInitializer</span> <span class="kd">implements</span> <span class="nc">ApplicationContextInitializer</span><span class="o">&lt;</span><span class="nc">ConfigurableApplicationContext</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">GenericContainer</span><span class="o">&lt;?&gt;</span> <span class="n">mailpitContainer</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GenericContainer</span><span class="o">&lt;&gt;(</span><span class="nc">DockerImageName</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"axllent/mailpit:v1.27.8"</span><span class="o">))</span>
        <span class="o">.</span><span class="na">withExposedPorts</span><span class="o">(</span><span class="mi">8025</span><span class="o">,</span> <span class="mi">1025</span><span class="o">)</span>
        <span class="o">.</span><span class="na">waitingFor</span><span class="o">(</span><span class="nc">Wait</span><span class="o">.</span><span class="na">forHttp</span><span class="o">(</span><span class="s">"/api/v1/messages"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">forPort</span><span class="o">(</span><span class="mi">8025</span><span class="o">)</span>
        <span class="o">.</span><span class="na">forStatusCode</span><span class="o">(</span><span class="mi">200</span><span class="o">));</span>
    
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="nc">ConfigurableApplicationContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">mailpitContainer</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        
        <span class="nc">TestPropertyValues</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
        <span class="s">"spring.mail.host="</span> <span class="o">+</span> <span class="n">mailpitContainer</span><span class="o">.</span><span class="na">getHost</span><span class="o">(),</span>
        <span class="s">"spring.mail.port="</span> <span class="o">+</span> <span class="n">mailpitContainer</span><span class="o">.</span><span class="na">getMappedPort</span><span class="o">(</span><span class="mi">1025</span><span class="o">)</span>
        <span class="o">).</span><span class="na">applyTo</span><span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">getEnvironment</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The key differences:</p>
<ul>
  <li>Port 8025 for web UI (vs 80 in smtp4dev)</li>
  <li>Port 1025 for SMTP (vs 25)</li>
  <li>API path is <code class="language-plaintext highlighter-rouge">/api/v1/messages</code> instead of <code class="language-plaintext highlighter-rouge">/api/messages</code></li>
</ul>

<p>Both work identically in your tests. Choose smtp4dev if you need advanced relay features or are already using it. Choose Mailpit if you want faster container startup and a smaller Docker footprint.</p>

<h3 id="postgresql-with-initialization-scripts">PostgreSQL with Initialization Scripts</h3>

<p>Sometimes I don’t want an empty database. I want schema + seed data loaded.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TestDatabaseInitializer</span> <span class="kd">implements</span> <span class="nc">ApplicationContextInitializer</span><span class="o">&lt;</span><span class="nc">ConfigurableApplicationContext</span><span class="o">&gt;</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">PostgreSQLContainer</span><span class="o">&lt;?&gt;</span> <span class="n">postgres</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PostgreSQLContainer</span><span class="o">&lt;&gt;(</span><span class="s">"postgres:16-alpine"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">withDatabaseName</span><span class="o">(</span><span class="s">"myapp"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">withCopyFileToContainer</span><span class="o">(</span><span class="nc">MountableFile</span><span class="o">.</span><span class="na">forClasspathResource</span><span class="o">(</span><span class="s">"init_schema.sql"</span><span class="o">),</span> <span class="s">"/docker-entrypoint-initdb.d/"</span><span class="o">);</span>
    
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">initialize</span><span class="o">(</span><span class="nc">ConfigurableApplicationContext</span> <span class="n">context</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">postgres</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
        
        <span class="nc">TestPropertyValues</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
        <span class="s">"spring.datasource.url="</span> <span class="o">+</span> <span class="n">postgres</span><span class="o">.</span><span class="na">getJdbcUrl</span><span class="o">(),</span>
        <span class="s">"spring.datasource.username="</span> <span class="o">+</span> <span class="n">postgres</span><span class="o">.</span><span class="na">getUsername</span><span class="o">(),</span>
        <span class="s">"spring.datasource.password="</span> <span class="o">+</span> <span class="n">postgres</span><span class="o">.</span><span class="na">getPassword</span><span class="o">()</span>
        <span class="o">).</span><span class="na">applyTo</span><span class="o">(</span><span class="n">context</span><span class="o">.</span><span class="na">getEnvironment</span><span class="o">());</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The trick: <strong><code class="language-plaintext highlighter-rouge">withCopyFileToContainer</code></strong> → place schema in <code class="language-plaintext highlighter-rouge">/docker-entrypoint-initdb.d/</code>. Postgres runs it automatically on startup.</p>

<h2 id="specialized-containers-vs-genericcontainer">Specialized Containers vs GenericContainer</h2>

<p>You might have noticed I used both <code class="language-plaintext highlighter-rouge">PostgreSQLContainer</code> and <code class="language-plaintext highlighter-rouge">GenericContainer</code>.</p>

<p>Here’s the rule of thumb:</p>

<ul>
  <li><strong>Use specialized containers</strong> when they exist (<code class="language-plaintext highlighter-rouge">PostgreSQLContainer</code>, <code class="language-plaintext highlighter-rouge">MongoDBContainer</code>, <code class="language-plaintext highlighter-rouge">KafkaContainer</code>, …).
They give you nice defaults and shortcuts.</li>
  <li><strong>Use <code class="language-plaintext highlighter-rouge">GenericContainer</code></strong> when no module exists (smtp4dev, Mailpit, custom APIs, your own Docker images).</li>
</ul>

<p>Think of <code class="language-plaintext highlighter-rouge">GenericContainer</code> as the <strong>Swiss Army knife</strong> of Testcontainers.
Everything else is built on top of it.</p>

<h2 id="pro-tips-from-my-experience">Pro Tips from My Experience</h2>
<h4 id="reuse-containers-across-tests"><strong>Reuse containers across tests</strong></h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Container</span>
<span class="kd">static</span> <span class="nc">PostgreSQLContainer</span><span class="o">&lt;?&gt;</span> <span class="n">postgres</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PostgreSQLContainer</span><span class="o">&lt;&gt;(</span><span class="s">"postgres:16.3"</span><span class="o">);</span>
</code></pre></div></div>

<p>Make them <code class="language-plaintext highlighter-rouge">static</code> to avoid restarting for every method. Here’s why this matters:</p>

<p align="center">
    <img src="/assets/img/static_1.svg" alt="Without static" style="height: 550px; margin-bottom: -400px; margin-top: -200px" />
    <img src="/assets/img/static_2.svg" alt="With static" style="height: 550px; margin-top: -100px; margin-bottom: -200px" />
</p>

<h4 id="pin-image-versions"><strong>Pin image versions</strong></h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">new</span> <span class="nc">PostgreSQLContainer</span><span class="o">&lt;&gt;(</span><span class="s">"postgres:16-alpine"</span><span class="o">);</span> <span class="c1">// stable</span>
<span class="k">new</span> <span class="nc">PostgreSQLContainer</span><span class="o">&lt;&gt;(</span><span class="s">"postgres:latest"</span><span class="o">);</span> <span class="c1">// risky</span>
</code></pre></div></div>

<h4 id="share-initializers-across-test-classes"><strong>Share initializers</strong> across test classes</h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@SpringBootTest</span>
<span class="nd">@ContextConfiguration</span><span class="o">(</span><span class="n">initializers</span> <span class="o">=</span> <span class="o">{</span>
<span class="nc">TestDatabaseInitializer</span><span class="o">.</span><span class="na">class</span><span class="o">,</span>
<span class="nc">Smtp4devTestContainerInitializer</span><span class="o">.</span><span class="na">class</span>
<span class="o">})</span>
<span class="kd">class</span> <span class="nc">MyIntegrationTest</span> <span class="o">{</span> <span class="o">...</span> <span class="o">}</span>
</code></pre></div></div>

<h4 id="dont-worry-too-much-about-test-speed"><strong>Don’t worry too much about test speed</strong></h4>
<p>Yes, Docker containers take a few seconds to start. 
But with static containers and proper reuse, I’ve found the startup cost is negligible compared to the confidence I gain. 
My test suite with PostgreSQL and smtp4dev adds maybe 5-10 seconds total. Well worth it.</p>

<h4 id="check-logs-when-debugging"><strong>Check logs when debugging</strong></h4>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">postgres</span><span class="o">.</span><span class="na">getLogs</span><span class="o">());</span>
</code></pre></div></div>

<h2 id="wrapping-up">Wrapping Up</h2>
<p>Testcontainers transformed how I think about integration testing.</p>

<p>I started with <code class="language-plaintext highlighter-rouge">@Container</code> and <code class="language-plaintext highlighter-rouge">@DynamicPropertySource</code> for simple cases.
When I needed more control, I reached for <code class="language-plaintext highlighter-rouge">ApplicationContextInitializer</code>.
And when I had to test against any Docker image, <code class="language-plaintext highlighter-rouge">GenericContainer</code> had my back.</p>

<p>The beauty is that I’m always testing against <strong>the real thing</strong>.
Real databases, real SMTP servers, real APIs and this without any of the traditional headaches of managing those services locally.</p>

<p>If you’re not using Testcontainers yet, I encourage you to give it a try on your next Spring Boot project.
Your future self (and your teammates) will thank you.</p>

<p>Now go forth and containerize those tests</p>

<h2 id="resources">Resources</h2>
<p><strong>Official Documentation:</strong></p>
<ul>
  <li><a href="https://www.testcontainers.org/">Testcontainers Official Documentation</a></li>
  <li><a href="https://java.testcontainers.org/">Testcontainers for Java</a></li>
  <li><a href="https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.testing">Spring Boot Testing Documentation</a></li>
</ul>

<p><strong>Docker Images Used:</strong></p>
<ul>
  <li><a href="https://hub.docker.com/_/postgres">PostgreSQL on Docker Hub</a></li>
  <li><a href="https://github.com/rnwood/smtp4dev">smtp4dev on GitHub</a></li>
  <li><a href="https://github.com/axllent/mailpit">Mailpit on GitHub</a></li>
</ul>

<p><strong>Related Tools:</strong></p>
<ul>
  <li><a href="https://www.docker.com/products/docker-desktop/">Docker Desktop</a></li>
  <li><a href="https://mvnrepository.com/artifact/org.testcontainers">Maven Central - Testcontainers</a></li>
</ul>]]></content><author><name>Oumaima Zerouali</name><email>oumaima.zerouali@gmail.com</email></author><category term="java" /><category term="spring-boot" /><category term="testing" /><category term="docker" /><summary type="html"><![CDATA[“Testcontainers is like having SpongeBob at the helm of your CI: cheerful, reliable, and somehow turning chaos into perfection.” - Me]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://localhost:4000/assets/img/spongebob-testcontainers.png" /><media:content medium="image" url="http://localhost:4000/assets/img/spongebob-testcontainers.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry xml:lang="en"><title type="html">Exceptions: The Emergency Brake, Not the Steering Wheel</title><link href="http://localhost:4000/2025/08/05/exceptions-should-be-exceptional/" rel="alternate" type="text/html" title="Exceptions: The Emergency Brake, Not the Steering Wheel" /><published>2025-08-05T09:00:00+02:00</published><updated>2025-08-05T09:00:00+02:00</updated><id>http://localhost:4000/2025/08/05/exceptions-should-be-exceptional</id><content type="html" xml:base="http://localhost:4000/2025/08/05/exceptions-should-be-exceptional/"><![CDATA[<blockquote>
  <p>“You don’t need a license to drive a sandwich.” — SpongeBob SquarePants</p>
</blockquote>

<p>As developers, we’re told to handle errors.<br />
But how we handle them really affects the way our code works.</p>

<p>A common mistake, especially in Java, is using exceptions to manage normal, expected stuff.<br />
It’s like using your car’s emergency brake every time you hit a red light.<br />
It kinda works… until it doesn’t.</p>

<p>Eventually, your code slows down, gets messy, and people avoid touching it like it’s cursed.</p>

<p>And hey, I’ve done it too.<br />
Throwing an exception is easy.<br />
It feels like a clean escape hatch when logic gets too messy.<br />
But here’s the thing: exceptions are meant for <strong>unexpected problems</strong>, not everyday flow.</p>

<p>Martin Fowler put it best:</p>
<blockquote>
  <p><strong>Exceptions should be exceptional.</strong></p>
</blockquote>

<p>Let’s break that down.</p>

<h2 id="what-actually-counts-as-exceptional">What <em>Actually</em> Counts as “Exceptional”?</h2>

<p>Think of an exception like a fire alarm.<br />
It should only go off when something’s seriously wrong. 
Something the code couldn’t have planned for.</p>

<p>Here’s a quick gut check:</p>
<ul>
  <li>Is this a <em>normal</em> part of business logic? → Don’t throw.</li>
  <li>Is this a <em>weird</em> failure that makes the method impossible to finish? → Exception time.</li>
</ul>

<h3 id="examples">Examples:</h3>
<p><strong>Actually Exceptional</strong></p>
<ul>
  <li>DB is down.</li>
  <li>Config file is missing or unreadable.</li>
  <li>API suddenly returns a 500.</li>
</ul>

<p><strong>Not Exceptional</strong></p>
<ul>
  <li>No user found for a search.</li>
  <li>Email format is invalid.</li>
  <li>List is empty.</li>
</ul>

<p>If it’s something you <em>expect might happen</em>, just handle it with normal logic.</p>

<h2 id="when-throwing-is-the-right-call">When Throwing Is the Right Call</h2>

<p>Here’s a good example of when an exception makes sense.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">double</span> <span class="nf">squareRoot</span><span class="o">(</span><span class="kt">double</span> <span class="n">number</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">number</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"Cannot calculate the square root of a negative number."</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="nc">Math</span><span class="o">.</span><span class="na">sqrt</span><span class="o">(</span><span class="n">number</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>This method’s job is to calculate square roots. If you give it a negative number, it literally can’t do that.
So yeah, an exception is fair. That’s not just “bad input”, it breaks the rules of what the method can even do.</p>

<h2 id="what-to-do-when-failures-arent-exceptional">What to Do When Failures <em>Aren’t</em> Exceptional</h2>

<p>Let’s talk about validation.</p>

<p>Imagine a user signs up with a bad email <em>and</em> a weak password.
Do you want to throw an exception for each issue, stopping after the first one?
Or do you want to show all the problems at once?</p>

<h3 id="the-wrong-way">The Wrong Way</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">(!</span><span class="n">email</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"@"</span><span class="o">))</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">InvalidUserException</span><span class="o">(</span><span class="s">"Email is invalid."</span><span class="o">);</span>
<span class="o">}</span>
<span class="k">if</span> <span class="o">(</span><span class="n">password</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">InvalidUserException</span><span class="o">(</span><span class="s">"Password too short."</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>This stops after the email fails, so the user keeps fixing one thing at a time. 
Super annoying.</p>

<h3 id="a-better-way-notification-pattern">A Better Way: Notification Pattern</h3>

<p>Let’s collect all issues in one go:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Notification</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">errors</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">addError</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span> <span class="n">errors</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">message</span><span class="o">);</span> <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">hasErrors</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="o">!</span><span class="n">errors</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">();</span> <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">getErrors</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">errors</span><span class="o">;</span> <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="nc">Notification</span> <span class="nf">validate</span><span class="o">(</span><span class="nc">User</span> <span class="n">user</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Notification</span> <span class="n">notification</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Notification</span><span class="o">();</span>

    <span class="k">if</span> <span class="o">(!</span><span class="n">user</span><span class="o">.</span><span class="na">getEmail</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="s">"@"</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">notification</span><span class="o">.</span><span class="na">addError</span><span class="o">(</span><span class="s">"Email is invalid."</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">user</span><span class="o">.</span><span class="na">getPassword</span><span class="o">().</span><span class="na">length</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">notification</span><span class="o">.</span><span class="na">addError</span><span class="o">(</span><span class="s">"Password must be at least 8 characters."</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="n">notification</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Now the user gets <em>all</em> feedback at once.
The backend stays chill.
No emergency brakes needed.</p>

<h2 id="custom-exceptions-when-theyre-actually-helpful">Custom Exceptions: When They’re Actually Helpful</h2>

<p>Custom exceptions are fine when they <em>mean</em> something specific, especially in business logic.</p>

<p>Example: a banking app.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">InsufficientFundsException</span> <span class="kd">extends</span> <span class="nc">RuntimeException</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">InsufficientFundsException</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>This makes it super clear what went wrong and you can handle it differently than, say, a network error.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">try</span> <span class="o">{</span>
    <span class="n">accountService</span><span class="o">.</span><span class="na">withdraw</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InsufficientFundsException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">showError</span><span class="o">(</span><span class="s">"You don’t have enough funds."</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">NetworkException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">showError</span><span class="o">(</span><span class="s">"Connection error. Please try again."</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>The goal: make errors <em>understandable</em> and <em>actionable</em>.</p>

<h2 id="the-hidden-costs-of-misusing-exceptions">The Hidden Costs of Misusing Exceptions</h2>

<p><strong>1. Performance</strong>
Throwing an exception isn’t free.
The JVM captures the whole stack trace, and that takes time.
If you’re throwing exceptions in a tight loop or in a high-traffic app, you’re asking for trouble.</p>

<p><strong>2. Readability</strong>
<code class="language-plaintext highlighter-rouge">try-catch</code> blocks are loud.
If you use them for stuff that’s not an error, your code becomes harder to read and understand.
Future you, or someone else, has to stop and ask, “Wait, is this <em>really</em> an error?”</p>

<p><strong>3. Bad APIs</strong>
If your backend throws an exception for bad input, it might just send back a generic <code class="language-plaintext highlighter-rouge">500</code>.
But that’s not a server error, it’s a user mistake.
Instead, return a <code class="language-plaintext highlighter-rouge">400 Bad Request</code> with a clean JSON response explaining what’s wrong.</p>

<h2 id="the-bigger-picture-dont-be-clever-be-clear">The Bigger Picture: Don’t Be “Clever”, Be Clear</h2>

<p>Throwing exceptions for normal stuff feels clever at first.
But clever code ages badly.</p>

<p>Clean code is clear code.
It doesn’t use exceptions like fancy <code class="language-plaintext highlighter-rouge">if</code> statements.
It uses them when something genuinely breaks.</p>]]></content><author><name>Oumaima Zerouali</name><email>oumaima.zerouali@gmail.com</email></author><category term="java" /><category term="best-practices" /><category term="architecture" /><summary type="html"><![CDATA[“You don’t need a license to drive a sandwich.” — SpongeBob SquarePants]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://localhost:4000/assets/img/exceptions.png" /><media:content medium="image" url="http://localhost:4000/assets/img/exceptions.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry xml:lang="nl"><title type="html">Exceptions: De Noodrem, niet de stuurwiel</title><link href="http://localhost:4000/nl/2025/08/05/exceptions-should-be-exceptional/" rel="alternate" type="text/html" title="Exceptions: De Noodrem, niet de stuurwiel" /><published>2025-08-05T09:00:00+02:00</published><updated>2025-08-05T09:00:00+02:00</updated><id>http://localhost:4000/nl/2025/08/05/exceptions-should-be-exceptional</id><content type="html" xml:base="http://localhost:4000/nl/2025/08/05/exceptions-should-be-exceptional/"><![CDATA[<blockquote>
  <p>“You don’t need a license to drive a sandwich.” — SpongeBob SquarePants</p>
</blockquote>

<p>Als developers wordt ons verteld dat we fouten moeten afhandelen.<br />
Maar hoe we dat doen beïnvloedt echt hoe onze code werkt.</p>

<p>Een veelgemaakte fout, vooral in Java, is het gebruik van exceptions om normale, verwachte dingen te beheren.<br />
Het is alsof je elke keer de noodrem van je auto gebruikt bij een rood licht.<br />
Het werkt een beetje… totdat het dat niet doet.</p>

<p>Uiteindelijk vertraagt je code, wordt het een rommeltje, en ontwijken mensen het alsof het vervloekt is.</p>

<p>En ja, ik heb het ook gedaan.<br />
Een exception gooien is makkelijk.<br />
Het voelt als een nette uitweg wanneer logica te ingewikkeld wordt.<br />
Maar hier is het punt: exceptions zijn bedoeld voor <strong>onverwachte problemen</strong>, niet voor de dagelijkse flow.</p>

<p>Martin Fowler zei het het beste:</p>
<blockquote>
  <p><strong>Exceptions moeten uitzonderlijk zijn.</strong></p>
</blockquote>

<p>Laten we dat even uit elkaar halen.</p>

<h2 id="wat-telt-echt-als-uitzonderlijk">Wat Telt <em>Echt</em> als “Uitzonderlijk”?</h2>

<p>Denk aan een exception als een brandalarm.<br />
Het mag alleen afgaan wanneer er echt iets mis is.<br />
Iets waar de code niet op had kunnen plannen.</p>

<p>Een snelle check:</p>
<ul>
  <li>Is dit een <em>normaal</em> onderdeel van de businesslogica? → Niet gooien.</li>
  <li>Is dit een <em>vreemde</em> fout waardoor de methode onmogelijk afgemaakt kan worden? → Tijd voor een exception.</li>
</ul>

<h3 id="voorbeelden">Voorbeelden</h3>
<p><strong>Echt Uitzonderlijk</strong></p>
<ul>
  <li>De database ligt eruit.</li>
  <li>Configuratiebestand ontbreekt of is niet leesbaar.</li>
  <li>API geeft ineens een 500 terug.</li>
</ul>

<p><strong>Niet Uitzonderlijk</strong></p>
<ul>
  <li>Geen gebruiker gevonden bij een zoekopdracht.</li>
  <li>Ongeldig e-mailadres.</li>
  <li>Lijst is leeg.</li>
</ul>

<p>Als het iets is dat je <em>zou verwachten</em>, handel het gewoon af met normale logica.</p>

<h2 id="wanneer-een-exception-wél-sinnig-is">Wanneer Een Exception Wél Sinnig Is</h2>

<p>Hier is een goed voorbeeld van wanneer een exception logisch is.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">double</span> <span class="nf">wortel</span><span class="o">(</span><span class="kt">double</span> <span class="n">getal</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">getal</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nf">IllegalArgumentException</span><span class="o">(</span><span class="s">"Kan de wortel van een negatief getal niet berekenen."</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="nc">Math</span><span class="o">.</span><span class="na">sqrt</span><span class="o">(</span><span class="n">getal</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Deze methode moet wortels berekenen. Als je er een negatief getal in stopt, kan hij dat letterlijk niet doen.
Dus ja, een exception is terecht. Dit is niet zomaar “foute input”, het breekt de regels van wat de methode überhaupt kan doen.</p>

<h2 id="wat-te-doen-wanneer-fouten-niet-uitzonderlijk-zijn">Wat Te Doen Wanneer Fouten <em>Niet</em> Uitzonderlijk Zijn</h2>

<p>Laten we het hebben over validatie.</p>

<p>Stel, een gebruiker registreert zich met een slecht e-mailadres <em>en</em> een zwak wachtwoord.
Wil je voor elk probleem een exception gooien en stoppen na het eerste?
Of wil je alle problemen tegelijk tonen?</p>

<h3 id="de-verkeerde-manier">De Verkeerde Manier</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">(!</span><span class="n">email</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">"@"</span><span class="o">))</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">InvalidUserException</span><span class="o">(</span><span class="s">"E-mail is ongeldig."</span><span class="o">);</span>
<span class="o">}</span>
<span class="k">if</span> <span class="o">(</span><span class="n">password</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">InvalidUserException</span><span class="o">(</span><span class="s">"Wachtwoord te kort."</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Dit stopt na de eerste fout, dus de gebruiker moet één probleem tegelijk oplossen.
Super irritant.</p>

<h3 id="een-betere-manier-notification-pattern">Een Betere Manier: Notification Pattern</h3>

<p>Verzamel alle problemen tegelijk:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Notificatie</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">fouten</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">voegFoutToe</span><span class="o">(</span><span class="nc">String</span> <span class="n">bericht</span><span class="o">)</span> <span class="o">{</span> <span class="n">fouten</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">bericht</span><span class="o">);</span> <span class="o">}</span>
    <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">heeftFouten</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="o">!</span><span class="n">fouten</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">();</span> <span class="o">}</span>
    <span class="kd">public</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="nf">getFouten</span><span class="o">()</span> <span class="o">{</span> <span class="k">return</span> <span class="n">fouten</span><span class="o">;</span> <span class="o">}</span>
<span class="o">}</span>

<span class="kd">public</span> <span class="nc">Notificatie</span> <span class="nf">valideer</span><span class="o">(</span><span class="nc">Gebruiker</span> <span class="n">gebruiker</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">Notificatie</span> <span class="n">notificatie</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Notificatie</span><span class="o">();</span>

    <span class="k">if</span> <span class="o">(!</span><span class="n">gebruiker</span><span class="o">.</span><span class="na">getEmail</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="s">"@"</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">notificatie</span><span class="o">.</span><span class="na">voegFoutToe</span><span class="o">(</span><span class="s">"E-mail is ongeldig."</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">gebruiker</span><span class="o">.</span><span class="na">getPassword</span><span class="o">().</span><span class="na">length</span><span class="o">()</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">notificatie</span><span class="o">.</span><span class="na">voegFoutToe</span><span class="o">(</span><span class="s">"Wachtwoord moet minstens 8 tekens bevatten."</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="n">notificatie</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Nu krijgt de gebruiker <em>alle</em> feedback tegelijk.
De backend blijft rustig.
Geen noodrem nodig.</p>

<h2 id="custom-exceptions-wanneer-ze-wél-handig-zijn">Custom Exceptions: Wanneer Ze Wél Handig Zijn</h2>

<p>Custom exceptions zijn prima wanneer ze iets <em>specifieks</em> betekenen, vooral in businesslogica.</p>

<p>Voorbeeld: een bankapplicatie.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">OnvoldoendeSaldoException</span> <span class="kd">extends</span> <span class="nc">RuntimeException</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nf">OnvoldoendeSaldoException</span><span class="o">(</span><span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Dit maakt meteen duidelijk wat er misging, en je kunt dit anders afhandelen dan bijvoorbeeld een netwerkfout.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">try</span> <span class="o">{</span>
    <span class="n">rekeningService</span><span class="o">.</span><span class="na">opnemen</span><span class="o">(</span><span class="mi">100</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">OnvoldoendeSaldoException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">toonFout</span><span class="o">(</span><span class="s">"Je hebt niet genoeg saldo."</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">NetworkException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">toonFout</span><span class="o">(</span><span class="s">"Verbindingsfout. Probeer opnieuw."</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Doel: fouten <em>begrijpelijk</em> en <em>handelbaar</em> maken.</p>

<h2 id="de-verborgen-kosten-van-misbruik-van-exceptions">De Verborgen Kosten van Misbruik van Exceptions</h2>

<p><strong>1. Performance</strong>
Exceptions gooien is niet gratis.
De JVM legt de volledige stacktrace vast, en dat kost tijd.
Als je dit in een strakke loop of in een drukke app doet, vraag je om problemen.</p>

<p><strong>2. Leesbaarheid</strong>
<code class="language-plaintext highlighter-rouge">try-catch</code> blokken zijn luid.
Gebruik je ze voor dingen die geen fout zijn, dan wordt je code moeilijker te lezen.
Toekomstig jij, of een collega, moet stoppen en denken: “Is dit <em>echt</em> een fout?”</p>

<p><strong>3. Slechte API’s</strong>
Gooi je een exception voor foute input in de backend, dan stuurt hij misschien gewoon een generieke <code class="language-plaintext highlighter-rouge">500</code>.
Maar dat is geen serverfout, het is een gebruikersfout.
Stuur liever een <code class="language-plaintext highlighter-rouge">400 Bad Request</code> met een nette JSON die uitlegt wat er mis is.</p>

<h2 id="het-grote-geheel-wees-duidelijk-niet-slim">Het Grote Geheel: Wees Duidelijk, Niet “Slim”</h2>

<p>Exceptions gooien voor normale dingen voelt eerst slim.
Maar slimme code veroudert slecht.</p>

<p>Schone code is duidelijke code.
Het gebruikt exceptions niet als fancy <code class="language-plaintext highlighter-rouge">if</code> statements.
Het gebruikt ze alleen wanneer iets echt stuk gaat.</p>]]></content><author><name>Oumaima Zerouali</name><email>oumaima.zerouali@gmail.com</email></author><category term="java" /><category term="best-practices" /><category term="architecture" /><summary type="html"><![CDATA[“You don’t need a license to drive a sandwich.” — SpongeBob SquarePants]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://localhost:4000/assets/img/exceptions.png" /><media:content medium="image" url="http://localhost:4000/assets/img/exceptions.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry xml:lang="nl"><title type="html">Error 404: Motivatie Niet Gevonden. Wanneer Je Codebase Je Laat Laten Staan</title><link href="http://localhost:4000/nl/2025/08/01/error-404-motiviation-not-found/" rel="alternate" type="text/html" title="Error 404: Motivatie Niet Gevonden. Wanneer Je Codebase Je Laat Laten Staan" /><published>2025-08-01T13:00:00+02:00</published><updated>2025-08-01T13:00:00+02:00</updated><id>http://localhost:4000/nl/2025/08/01/error-404-motiviation-not-found</id><content type="html" xml:base="http://localhost:4000/nl/2025/08/01/error-404-motiviation-not-found/"><![CDATA[<blockquote>
  <p>“I’ll have you know that I stubbed my toe last week and only cried for 20 minutes.” - Spongebob SquarePants</p>
</blockquote>

<p>We hebben het allemaal wel eens meegemaakt: van die dagen dat je vol energie zit en een nieuw project induikt.<br />
De code stroomt, de tests slagen, en je voelt je de meester van de digitale wereld.<br />
Maar dan gebeurt het: je opent je editor en… niets.<br />
De inspiratie is weg.<br />
<strong>Error 404: Motivatie Niet Gevonden.</strong></p>

<p>Dit is niet zomaar uitstelgedrag.<br />
Het project dat ooit zo veelbelovend leek, voelt nu als een ondoorgrondelijk, onbekend terrein.<br />
Je weet dat je iets moet doen, maar je hebt geen idee waar te beginnen.</p>

<h3 id="de-vreemdeling-in-je-eigen-code">De Vreemdeling in Je Eigen Code</h3>
<p>Een van de meest voorkomende redenen voor dit gevoel is dat je codebase voelt alsof hij van iemand anders is.<br />
Zelfs als je het zelf hebt geschreven, kan een project van een paar maanden geleden ineens een vreemde aanvoelen.</p>

<ul>
  <li><strong>Onleesbare code:</strong> Geen duidelijke variabelen, geen documentatie. Wat deed die functie ook alweer? Waarom schreef ik het zo?</li>
  <li><strong>Onbegrijpelijke architectuur:</strong> De structuur van het project is zo complex dat je de logica niet meer kunt volgen.</li>
  <li><strong>Gebroken tests:</strong> Of nog erger, helemaal geen tests. De angst iets te wijzigen en het hele project te breken verhindert je om überhaupt iets te doen.</li>
</ul>

<p>Dit zijn de momenten dat je beseft dat je hebt geïnvesteerd in een lastpost: <strong>technische schuld</strong>.<br />
Het is alsof je jaren hebt uitgesteld om af te wassen, en nu sta je voor een berg vuile borden zo hoog dat je de motivatie verliest om te beginnen.</p>

<h3 id="de-eindeloze-refactor-lus">De Eindeloze Refactor-lus</h3>
<p>Naast technische schuld is er nog een grote motivatie-killer: de constante behoefte om te veranderen.<br />
De ene dag heb je een geweldig idee voor het design, een nieuw kleurenschema, of een andere aanpak van de architectuur.<br />
Een paar dagen later verander je van gedachten en besluit je alles te refactoren.<br />
Deze eindeloze lus van “nu maak ik het perfect” is een valstrik.<br />
Je houdt nooit lang genoeg vast aan één idee om het af te maken, en je eindigt met een gefragmenteerd, half-af project en nul motivatie.</p>

<h3 id="hoe-herverbinden">Hoe Herverbinden</h3>
<p>Het herstellen van de relatie met je codebase vereist een paar strategische stappen.<br />
Het is geen snelle oplossing, maar een investering in de toekomst.</p>

<ol>
  <li><strong>Begin klein. Heel klein.</strong> Probeer niet het hele project te herschrijven. Zoek een kleine, geïsoleerde taak. Een bug fix in één functie, of een paar regels code refactoren om ze beter leesbaar te maken. Maak kleine commits met duidelijke berichten zodat je er makkelijk naar terug kunt verwijzen.</li>
  <li><strong>Maak één idee af voordat je aan een ander begint.</strong> In plaats van constant te refactoren, commit je aan één idee voor je design of architectuur. Werk eraan, maak het af, en <strong>deploy iets</strong>. Zodra het live staat, kun je beter beslissen wat er veranderd moet worden.</li>
  <li><strong>Schrijf tests.</strong> Niets geeft meer vertrouwen dan goede tests. Voeg een eenvoudige unit test toe aan de code die je aanraakt. Dit geeft je een vangnet en het vertrouwen om verdere wijzigingen door te voeren.</li>
  <li><strong>Documenteer je eigen code.</strong> Zodra je een klein onderdeel hebt begrepen, schrijf het op. Voeg commentaar toe, update de README. Dit helpt niet alleen jezelf in de toekomst, maar ook iedereen die later met deze code werkt.</li>
  <li><strong>Praat erover.</strong> Bespreek het project met een collega of in een community. Soms is een frisse blik alles wat je nodig hebt. Leg uit waar je vastloopt. Het proces van je probleem verwoorden kan vaak tot de oplossing leiden.</li>
  <li><strong>Gun jezelf een pauze.</strong> Soms is de beste aanpak om er helemaal afstand van te nemen. Ga wandelen, lees een boek, of werk aan een ander project. De oplossing komt vaak op de meest onverwachte momenten, wanneer je geest niet actief aan het worstelen is.</li>
</ol>]]></content><author><name>Oumaima Zerouali</name><email>oumaima.zerouali@gmail.com</email></author><category term="personal" /><category term="career" /><category term="productivity" /><summary type="html"><![CDATA[“I’ll have you know that I stubbed my toe last week and only cried for 20 minutes.” - Spongebob SquarePants]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://localhost:4000/assets/img/error-motivation-not-found.png" /><media:content medium="image" url="http://localhost:4000/assets/img/error-motivation-not-found.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry xml:lang="en"><title type="html">Error 404: Motivation Not Found. When Your Codebase Ghosts You</title><link href="http://localhost:4000/2025/08/01/error-404-motiviation-not-found/" rel="alternate" type="text/html" title="Error 404: Motivation Not Found. When Your Codebase Ghosts You" /><published>2025-08-01T13:00:00+02:00</published><updated>2025-08-01T13:00:00+02:00</updated><id>http://localhost:4000/2025/08/01/error-404-motiviation-not-found</id><content type="html" xml:base="http://localhost:4000/2025/08/01/error-404-motiviation-not-found/"><![CDATA[<blockquote>
  <p>“I’ll have you know that I stubbed my toe last week and only cried for 20 minutes.” - Spongebob SquarePants</p>
</blockquote>

<p>We’ve all been there: those days when you’re full of energy, diving into a new project. 
The code flows, the tests pass, and you feel like the master of the digital world. 
But then, it happens: You open your editor and… nothing. 
The inspiration is gone. 
<strong>Error 404: Motivation Not Found.</strong></p>

<p>This isn’t just procrastination. 
The project that was once so promising now feels like a stubborn, unfamiliar landscape. 
You know you have to do something with it, but you have no idea where to start.</p>

<h3 id="the-stranger-in-your-own-code">The Stranger in Your Own Code</h3>
<p>One of the most common reasons for this feeling is that your codebase feels like it belongs to someone else. 
Even if you wrote it yourself, a project from just a few months ago can feel like a stranger.</p>

<ul>
  <li><strong>Unreadable code:</strong> No clear variable names, no documentation. What did that function do again? Why did I write it this way?</li>
  <li><strong>Incomprehensible architecture:</strong> The structure of the project is so complex that you can no longer follow the logic.</li>
  <li><strong>Broken tests:</strong> Or, even worse, no tests at all. The fear of changing something and crashing the whole thing prevents you from writing any.</li>
</ul>

<p>These are the moments when you realize you’ve invested in a liability: <strong>technical debt</strong>. 
It’s like you’ve been putting off washing the dishes for years, and now you’re faced with a mountain of dirty plates so high that you lose the motivation to even begin.</p>

<h3 id="the-endless-refactor-loop">The Endless Refactor Loop</h3>
<p>Beyond technical debt, there’s another major motivation killer: the constant need to change. 
One day you have a great idea for the design, a new color scheme, or a different approach to the architecture. 
A few days later, you change your mind and decide to refactor everything. 
This endless loop of “I’ll get it perfect this time” is a trap. 
You never commit to a single idea long enough to see it through, so you end up with a fragmented, half-finished project and zero motivation.</p>

<h3 id="how-to-reconnect">How to Reconnect</h3>
<p>Repairing the relationship with your codebase requires a few strategic steps. 
It’s not a quick fix but an investment in the future.</p>

<ol>
  <li><strong>Start small. Very small.</strong> Don’t try to rewrite the entire project. Find a small, isolated task. A bug fix in a single function, or refactoring a few lines of code to make them more readable. Make small commits with clear messages so you can easily refer back to them.</li>
  <li><strong>Finish one idea before starting another.</strong> Instead of constantly refactoring, commit to a single idea for your design or architecture. Work on it, finish it, and <strong>deploy something</strong>. Once it’s live, you can make an informed decision about what needs to change.</li>
  <li><strong>Write tests.</strong> Nothing provides more confidence than good tests. Add a simple unit test to the code you’re touching. This gives you a safety net and the courage to make further changes.</li>
  <li><strong>Document your own code.</strong> Once you’ve understood a small part, write it down. Add comments, update the README. This helps not only your future self but also anyone who works with this code after you.</li>
  <li><strong>Talk about it.</strong> Discuss the project with a colleague or in a community. Sometimes a fresh perspective is all you need. Explain where you’re stuck. The process of articulating your problem can often lead to the solution.</li>
  <li><strong>Give yourself a break.</strong> Sometimes the best approach is to step away entirely. Go for a walk, read a book, or work on a different project. The solution often comes at the most unexpected moments, when your mind isn’t actively working on it.</li>
</ol>]]></content><author><name>Oumaima Zerouali</name><email>oumaima.zerouali@gmail.com</email></author><category term="personal" /><category term="career" /><category term="productivity" /><summary type="html"><![CDATA[“I’ll have you know that I stubbed my toe last week and only cried for 20 minutes.” - Spongebob SquarePants]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://localhost:4000/assets/img/error-motivation-not-found.png" /><media:content medium="image" url="http://localhost:4000/assets/img/error-motivation-not-found.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry xml:lang="nl"><title type="html">Het Seizoen van Afscheid</title><link href="http://localhost:4000/nl/2025/06/24/saying-goodbye/" rel="alternate" type="text/html" title="Het Seizoen van Afscheid" /><published>2025-06-24T11:30:00+02:00</published><updated>2025-06-24T11:30:00+02:00</updated><id>http://localhost:4000/nl/2025/06/24/saying-goodbye</id><content type="html" xml:base="http://localhost:4000/nl/2025/06/24/saying-goodbye/"><![CDATA[<blockquote>
  <p>“I can’t do this, Patrick!” - SpongeBob SquarePants</p>
</blockquote>

<blockquote>
  <p>“That’s okay, SpongeBob. I can’t do it either.” - Patrick Star</p>
</blockquote>

<p>De laatste tijd voelt het als een seizoen van afscheid.</p>

<p>Afgelopen vrijdag verliet mijn stagebegeleider het bedrijf.<br />
In de komende weken zal ik afscheid nemen van nog vijf collega’s.<br />
Mensen die mijn reis hier hebben gevormd, op manieren groot en klein.<br />
Mensen die met me hebben gelachen, me uitgedaagd, gesteund en in mij geloofd.</p>

<p>En hoewel ze allemaal doorgaan naar iets nieuws, laat elk afscheid een stille pijn achter.<br />
Niet omdat ik niet blij voor ze ben — <strong>dat ben ik</strong> — maar omdat elk vertrek je laat beseffen hoeveel de mensen om je heen eigenlijk betekenen.</p>

<p>Deze post is niet alleen een afscheid.<br />
Het is een <strong>dankjewel</strong>.<br />
Aan mijn mentor, aan mijn collega’s, en aan iedereen die ooit een plek meer dan “gewoon werk” heeft laten voelen.</p>

<h2 id="mentoren-zijn-belangrijker-dan-je-denkt">Mentoren Zijn Belangrijker Dan Je Denkt</h2>
<p>Ik liep stage bij het toenmalige Ordina.<br />
We hadden een cloud-gerelateerd stageproject gekozen, ondanks dat we absoluut niets van cloud wisten.<br />
We struikelden ons een weg door de opdracht, probeerden alles wat we konden bedenken, en worstelden meer dan eens.<br />
Onze mentor hield onze hand er niet doorheen.<br />
In plaats daarvan gaf hij precies genoeg: genoeg richting om op het juiste pad te komen, maar nooit zoveel dat we het niet zelf zouden ontdekken.<br />
Hij liet ruimte om trots te zijn op wat we bouwden.</p>

<p><em>En toen kwam de eindpresentatie.</em></p>

<p>Dit was niet zomaar een show; het telde mee voor onze cijfers en het was voor echte medewerkers.<br />
Het begon goed.<br />
Maar ergens onderweg nam de stress het over.<br />
<em>Ik verstijfde.</em><br />
<em>Volledig blanco.</em><br />
<em>Een lange, zware stilte.</em><br />
En toen, ik haalde diep adem, herpakte mezelf, en zette door.<br />
Daarna huilde ik.<br />
Ik was ervan overtuigd dat ik gefaald had. <em>Hij gaat ze vertellen dat ik er nog niet klaar voor ben,</em> dacht ik.<br />
<em>Dit is het.</em></p>

<p>Maar een paar dagen later kreeg ik een bericht van mijn docent:</p>
<blockquote>
  <p>“Ik heb net met je mentors gesproken; ik weet niet wat je deed, maar zij zijn je grootste fans.”</p>
</blockquote>

<p>Ik kon het niet geloven. En kort daarna kreeg ik een contractaanbieding.</p>

<p>Op zijn laatste dag herinnerde hij me aan dat moment. Hij zei:</p>
<blockquote>
  <p>“Het blijft me verbazen; hoe je tijdens die eerste presentatie bijna instortte… en nu presenteert alsof het vanzelfsprekend is.”</p>
</blockquote>

<p>En dat was het soort mentor dat hij was.<br />
Hij zag meer in mij dan ik zelf zag.<br />
Hij geloofde in mijn potentieel toen ik alleen maar mijn fouten zag.<br />
En dankzij hem begon ik deze hele reis met vertrouwen dat ik nog niet had verdiend, maar hij gaf het me toch.</p>

<p>Daar ben ik altijd dankbaar voor.</p>

<h2 id="impact-is-niet-altijd-zichtbaar-maar-het-is-er">Impact Is Niet Altijd Zichtbaar (Maar Het Is Er)</h2>
<p>Ik weet niet precies wat voor impact ik heb gehad op de mensen die vertrekken.<br />
<em>Ik hoop dat ik ze aan het lachen heb gemaakt.</em><br />
<em>Ik hoop dat ik ze het gevoel gaf gezien, gesteund en gewaardeerd te worden, zoals zij voor mij deden.</em><br />
Ik hoop dat iets wat ik zei of deed hielp, zelfs maar een beetje.</p>

<p>Maar ik weet wél welke impact zij op mij hebben gehad.</p>

<p>De stille aanmoedigingen.<br />
Het korte “je kunt dit” vlak voor een presentatie.<br />
De check-ins die precies op het juiste moment kwamen, ook al wisten ze dat niet zelf.</p>

<p>De momenten die op dat moment klein leken, maar achteraf?<br />
Het waren goudmomenten.<br />
Het is makkelijk te onderschatten hoeveel verschil iemand kan maken door gewoon zichzelf te zijn.<br />
Door gewoon consistent te zijn.</p>

<p>En als ik nadenk over nalatenschap, niet in carrière-termen, maar in <em>menselijke</em> zin:<br />
dat zijn de mensen die de grootste indruk achterlaten. Niet door wat ze bouwden.<br />
Maar door hoe ze <em>mensen lieten voelen</em> terwijl ze dat deden.</p>

<h2 id="laat-het-pijn-doen-maar-laat-het-betekenis-hebben">Laat Het Pijn Doen, Maar Laat Het Betekenis Hebben</h2>
<p>Ik ga niet doen alsof afscheid nemen geen pijn doet, want dat doet het.<br />
Het doet pijn op stille, onverwachte manieren.<br />
In de pauze voordat je een bericht stuurt en beseft dat ze er niet meer zijn.<br />
Bij de laatste zwaai.<br />
In de lege plek die iemand achterlaat.</p>

<p>Het doet pijn omdat iets ertoe deed.<br />
Omdat iemand ertoe deed.<br />
Omdat de tijd die je deelde niet zomaar tijd was, maar vertrouwen, groei, lachen, steun.<br />
Het was echt.<br />
Het is verleidelijk om het weg te poetsen, te zeggen <em>het gaat wel</em>, te glimlachen, bezig en afgeleid te blijven.<br />
Maar deze keer kies ik ervoor dat niet te doen.</p>

<p>Ik laat het een beetje pijn doen.<br />
Het laten pijn doen is een manier om de waarde van die connectie te erkennen.<br />
Het is een manier om te zeggen: <em>dit was niet zomaar iemand met wie ik werkte, dit was iemand die ik zo respecteerde.</em></p>

<h2 id="de-mensen-maken-de-plek">De Mensen Maken de Plek</h2>
<p><em>Banen zijn banen.</em><br />
<em>Projecten komen en gaan.</em><br />
Maar de mensen… die maken het tot wat het is.</p>

<p>Het zijn de mensen die echt vragen hoe het met je gaat.<br />
Die je uitdagen met vriendelijkheid.<br />
Die juichen bij je successen en naast je zitten bij de verliezen.<br />
Die werk menselijk maken.</p>

<p>Aan mijn mentor, en aan elke collega van wie ik de komende weken afscheid neem: <strong>Dankjewel</strong>.<br />
Voor het onderdeel zijn van dit hoofdstuk.<br />
Voor alles wat je gaf, bewust of onbewust.<br />
Je verlaat misschien het gebouw, maar je verlaat mijn verhaal niet.</p>]]></content><author><name>Oumaima Zerouali</name><email>oumaima.zerouali@gmail.com</email></author><category term="personal" /><category term="career" /><category term="team-culture" /><summary type="html"><![CDATA[“I can’t do this, Patrick!” - SpongeBob SquarePants]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://localhost:4000/assets/img/saying-goodbye.png" /><media:content medium="image" url="http://localhost:4000/assets/img/saying-goodbye.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry xml:lang="en"><title type="html">The Season of Goodbyes</title><link href="http://localhost:4000/2025/06/24/saying-goodbye/" rel="alternate" type="text/html" title="The Season of Goodbyes" /><published>2025-06-24T11:30:00+02:00</published><updated>2025-06-24T11:30:00+02:00</updated><id>http://localhost:4000/2025/06/24/saying-goodbye</id><content type="html" xml:base="http://localhost:4000/2025/06/24/saying-goodbye/"><![CDATA[<blockquote>
  <p>“I can’t do this, Patrick!” - SpongeBob SquarePants</p>
</blockquote>

<blockquote>
  <p>“That’s okay, SpongeBob. I can’t do it either.” - Patrick Star</p>
</blockquote>

<p>Lately, it feels like a season of goodbyes.</p>

<p>Last Friday, my internship mentor left the company. 
In the coming weeks, I’ll be saying goodbye to five more colleagues. 
People who’ve shaped my journey here in ways both big and small. 
People who’ve laughed with me, challenged me, supported me, and believed in me.</p>

<p>And while they’re each moving on to new things, each goodbye leaves a quiet ache. 
Not because I’m not happy for them, <strong>I am</strong>, but because every departure makes you realize just how much the people around you matter.</p>

<p>This post isn’t just a goodbye. 
It’s a thank you. 
To my mentor, to my colleagues, and to anyone who’s ever made a place feel like more than just a job.</p>

<h2 id="mentors-matter-more-than-you-think">Mentors Matter More Than You Think</h2>
<p>I did my internship at what was then called Ordina. 
We had picked a cloud-related internship project, despite knowing absolutely nothing about the cloud. 
We fumbled our way through, tried everything we could think of, and struggled more than once. 
Our mentor didn’t hold our hands through it. 
Instead, he gave us just enough: enough guidance to set us in the right direction, but never so much that we wouldn’t discover it ourselves. 
He left room for us to feel proud of what we were building.</p>

<p><em>Then came the final presentation.</em></p>

<p>This wasn’t just for show, it counted toward our grades, and it was in front of real employees. 
It started well. 
But somewhere along the way, stress took over.
<em>I froze.</em>
<em>Complete blank.</em>
<em>A long, heavy silence.</em>
And then, I gathered myself, took a breath, and pushed through. 
Afterwards, I cried. 
I was convinced I had failed. <em>He’s going to tell them I’m not ready,</em> I thought. 
<em>This is it.</em></p>

<p>But a few days later, I got a message from my teacher:</p>
<blockquote>
  <p>“Just spoke with your mentors; I don’t know what you did, but they’re your biggest fans.”</p>
</blockquote>

<p>I couldn’t believe it. And shortly after, I had a contract offer.</p>

<p>On his last day, he reminded me of that moment. He said:</p>
<blockquote>
  <p>“It still amazes me; how you went from nearly collapsing during that first presentation… to presenting like it’s second nature now.”</p>
</blockquote>

<p>And that’s the kind of mentor he was. 
He saw more in me than I saw in myself. 
He believed in my potential when all I could see were my mistakes. 
And because of him, I started this whole journey with confidence I hadn’t yet earned, but he gave it to me anyway.</p>

<p>And for that, I’ll always be grateful.</p>

<h2 id="impact-isnt-always-visible-but-its-there">Impact Isn’t Always Visible (But It’s There)</h2>
<p>I don’t know what impact I’ve had on the people who are leaving.
<em>I hope I made them laugh.</em>
<em>I hope I made them feel seen, supported, and appreciated in the way they did for me.</em>
I hope something I said or did helped, even if just a little.</p>

<p>But I <em>do</em> know the impact they’ve had on me.</p>

<p>The quiet encouragements.
The quick “you’ve got this” before a talk.
The check-ins that came at <em>exactly</em> the right time, even if they didn’t know it.</p>

<p>The moments that felt small at the moment, but looking back? 
They were gold. 
It’s easy to underestimate how much of a difference someone can make just by showing up as themselves. 
Just by being consistent.</p>

<p>And when I think about legacy, not in the career sense, but the <em>human</em> sense
those are the people who left the biggest marks. Not because of what they built. 
But because of how they <em>made people feel</em> while they were building it.</p>

<h2 id="let-it-hurt-but-let-it-mean-something">Let It Hurt, But Let It Mean Something</h2>
<p>I won’t pretend that goodbyes don’t hurt, because they do.
They hurt in quiet, unexpected ways. 
In the pause before you send a message and realize they’re no longer there. 
In the final wave. 
In the space someone used to fill.</p>

<p>They hurt because something mattered. 
Because someone mattered. 
Because the time you shared wasn’t just time, it was trust, growth, laughter, support. 
It was real. 
It’s tempting to brush it off, to say <em>I’m fine</em>, to smile through it, to stay busy and distracted. 
But this time, I’m choosing not to.</p>

<p>I’m letting it hurt, just a little.
Letting it hurt is a way of recognizing the value of that connection. 
It’s a way of saying: <em>this wasn’t just someone I worked with, this was someone who I respected so much.</em></p>

<h2 id="the-people-make-the-place">The People Make the Place</h2>
<p><em>Jobs are jobs.</em>
<em>Projects come and go.</em>
But the people, they make it what it is.</p>

<p>It’s the ones who ask how you’re really doing. 
The ones who challenge you with kindness. 
Who cheer for your wins and sit with you in the losses. 
Who make work feel human.</p>

<p>To my mentor, and to every colleague I’ll be saying goodbye to in the next few weeks: <strong>Thank you</strong>. 
For being part of this chapter. 
For everything you gave, knowingly or not. 
You may be leaving the building, but you’re not leaving my story.</p>]]></content><author><name>Oumaima Zerouali</name><email>oumaima.zerouali@gmail.com</email></author><category term="personal" /><category term="career" /><category term="team-culture" /><summary type="html"><![CDATA[“I can’t do this, Patrick!” - SpongeBob SquarePants]]></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="http://localhost:4000/assets/img/saying-goodbye.png" /><media:content medium="image" url="http://localhost:4000/assets/img/saying-goodbye.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry></feed>