---
layout: default
---

<section class="hero">
    <h1 class="hero-title">{{ page.title }}</h1>
    <p class="hero-tagline">{{ page.tagline | default: site.description }}</p>
</section>

<section class="featured-posts">
    {% assign current_lang = page.lang | default: site.default_lang %}
    {% assign lang_posts = site.posts | where: "lang", current_lang %}

    <div class="magazine-layout">
        {% if lang_posts.size > 0 %}
        {% assign featured_post = lang_posts.first %}
        <article class="post-card post-card--featured">
            <div class="post-card-content">
                <h2 class="post-card-title">
                    <a href="{{ featured_post.url | relative_url }}">{{ featured_post.title }}</a>
                </h2>

                {% assign featured_lead = featured_post.excerpt | default: featured_post.content | strip_html %}
                {% if featured_lead %}
                <p class="post-card-excerpt">{{ featured_lead | truncatewords: 180 }}</p>
                {% endif %}

                {% assign parts = featured_post.content | split: '</blockquote>' %}
                {% assign cleaned = parts[1] %}
                {% assign intro_text = cleaned | strip_html | truncatewords: 80 %}
                {% if intro_text %}
                <p class="post-card-intro">{{ intro_text }}</p>
                {% endif %}

                <div class="post-card-meta">
                    <time datetime="{{ featured_post.date | date_to_xmlschema }}">{{ featured_post.date | date: "%B %d, %Y" }}</time>
                </div>
            </div>
        </article>
        {% endif %}

        <div class="sidebar-grid">
            {% assign post_count = 0 %}
            {% assign skip_first = true %}

            {% for post in lang_posts %}
                {% if skip_first %}
                    {% assign skip_first = false %}
                    {% continue %}
                {% endif %}

                {% if post_count < 3 %}
                    {% assign post_class = "post-card post-card--small" %}

                    <article class="{{ post_class }}">
                        <div class="post-card-content">
                            <h3 class="post-card-title">
                                <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
                            </h3>
                            {% if post.excerpt %}
                            <p class="post-card-excerpt">{{ post.excerpt | strip_html | truncatewords: 15 }}</p>
                            {% endif %}
                            <div class="post-card-meta">
                                <time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%B %d, %Y" }}</time>
                            </div>
                        </div>

                        <div class="post-card-image-small">
                            <a href="{{ post.url | relative_url }}">
                                {% if post.image %}
                                <img src="{{ post.image | relative_url }}" alt="{{ post.image_alt | default: post.title | append: ' - Featured image' }}" loading="lazy" decoding="async">
                                {% else %}
                                <img src="https://picsum.photos/seed/{{ post.title | slugify }}/200/200" alt="Placeholder image for {{ post.title }}" loading="lazy" decoding="async">
                                {% endif %}
                            </a>
                        </div>
                    </article>

                    {% assign post_count = post_count | plus: 1 %}
                {% endif %}
            {% endfor %}
        </div>
    </div>

    <div class="view-all-posts">
        {% if current_lang == 'nl' %}
        <a href="{{ '/nl/posts' | relative_url }}" class="view-all-link">{{ site.data.translations[current_lang].sections.view_all_posts }}</a>
        {% else %}
        <a href="{{ '/posts' | relative_url }}" class="view-all-link">{{ site.data.translations[current_lang].sections.view_all_posts }}</a>
        {% endif %}
    </div>
</section>

